!function(){var e,t,i={8048:function(e,t,i){"use strict";var r=i(8081),n=i.n(r),o=i(3645),s=i.n(o)()(n());s.push([e.id,'div[id^=wrapperContainerForShadowDom_],.obv-video-wrapper{position:relative}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper,.obv-video-wrapper .ob-player-wrapper{z-index:1;top:0;margin-right:auto;margin-left:auto;display:flex;flex-direction:column;position:relative}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.in-widget,.obv-video-wrapper .ob-player-wrapper.in-widget{position:absolute}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.in-widget .ob-player[id$=VI_Player],.obv-video-wrapper .ob-player-wrapper.in-widget .ob-player[id$=VI_Player]{display:flex !important;align-items:center;background:#000}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.above-widget,.obv-video-wrapper .ob-player-wrapper.above-widget{margin-bottom:20px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.below-widget,.obv-video-wrapper .ob-player-wrapper.below-widget{margin-top:20px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.obv-hide-wrapper,.obv-video-wrapper .ob-player-wrapper.obv-hide-wrapper{visibility:hidden;position:absolute;z-index:-999999999999}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .ob-inner-player-wrapper,.obv-video-wrapper .ob-player-wrapper.ob-sticky .ob-inner-player-wrapper{overflow:visible}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .omp-native-description,div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .omp-native-title,.obv-video-wrapper .ob-player-wrapper.ob-sticky .omp-native-description,.obv-video-wrapper .ob-player-wrapper.ob-sticky .omp-native-title{-webkit-line-clamp:1}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .omp-native-title,.obv-video-wrapper .ob-player-wrapper.ob-sticky .omp-native-title{font-size:16px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .omp-native-description,.obv-video-wrapper .ob-player-wrapper.ob-sticky .omp-native-description{font-size:12px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .omp-sponsor-brand,.obv-video-wrapper .ob-player-wrapper.ob-sticky .omp-sponsor-brand{font-size:11px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky .omp-native-button,.obv-video-wrapper .ob-player-wrapper.ob-sticky .omp-native-button{font-size:11px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper.ob-sticky-z-index,.obv-video-wrapper .ob-player-wrapper.ob-sticky-z-index{z-index:1}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .ob-inner-player-wrapper,.obv-video-wrapper .ob-player-wrapper .ob-inner-player-wrapper{position:relative;flex:1;overflow:hidden;max-height:100%;max-width:100%}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .ob-inner-player-wrapper .ob-player,.obv-video-wrapper .ob-player-wrapper .ob-inner-player-wrapper .ob-player{width:100%;height:100%;position:absolute;z-index:-99999999999;top:0}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .ob-inner-player-wrapper .ob-player.obv-playing,.obv-video-wrapper .ob-player-wrapper .ob-inner-player-wrapper .ob-player.obv-playing{position:relative;z-index:1;display:block}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-title-wrapper,.obv-video-wrapper .ob-player-wrapper .obv-title-wrapper{padding:8px 6px 0;font-size:14px;color:#000}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper{position:absolute;direction:ltr !important;bottom:14%;right:0;z-index:3;border-radius:2px;border:solid .5px rgba(255,255,255,.7);background-color:rgba(0,0,0,.8);cursor:pointer;font-family:Lato,"sans-serif";font-size:12px;display:flex;align-items:center;color:#fff;gap:8px;padding:8px;line-height:1}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button{bottom:20%}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>span:first-child,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>span:first-child{font-size:13px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon{font-size:10px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon:after,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper.minimize-skip-button>.obv-skip-icon:after{font-size:12px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper>span:first-child,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper>span:first-child{direction:ltr !important;font-family:Arial,"sans-serif";font-size:18px}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon{font-size:12px;position:relative}div[id^=wrapperContainerForShadowDom_] .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon:after,.obv-video-wrapper .ob-player-wrapper .obv-skip-wrapper>.obv-skip-icon:after{content:"⏽";font-size:14px;margin-left:1px}div[id^=wrapperContainerForShadowDom_] #skip-btn,.obv-video-wrapper #skip-btn{display:none !important}',""]),t.Z=s},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",r=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),r&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),r&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,r,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(s[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&s[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},8081:function(e){"use strict";e.exports=function(e){return e[1]}},6515:function(e,t,i){"use strict";i.d(t,{X:function(){return n}});var r=i(655),n=function(e){function t(t){var i=e.call(this)||this;return i._value=t,i}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var i=e.prototype._subscribe.call(this,t);return!i.closed&&t.next(this._value),i},t.prototype.getValue=function(){var e=this,t=e.hasError,i=e.thrownError,r=e._value;if(t)throw i;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i(6716).x)},1480:function(e,t,i){"use strict";i.d(t,{y:function(){return u}});var r=i(5642),n=i(5720),o=i(6766),s=i(278);function a(e){return 0===e.length?s.y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var d=i(3912),l=i(8474),c=i(8846),u=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var o,s=this,a=(o=e)&&o instanceof r.Lv||function(e){return e&&(0,l.m)(e.next)&&(0,l.m)(e.error)&&(0,l.m)(e.complete)}(o)&&(0,n.Nn)(o)?e:new r.Hp(e,t,i);return(0,c.x)((function(){var e=s,t=e.operator,i=e.source;a.add(t?t.call(a,i):i?s._subscribe(a):s._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=g(t))((function(t,n){var o=new r.Hp({next:function(t){try{e(t)}catch(e){n(e),o.unsubscribe()}},error:n,complete:t});i.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=g(e))((function(e,i){var r;t.subscribe((function(e){return r=e}),(function(e){return i(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function g(e){var t;return null!==(t=null!=e?e:d.v.Promise)&&void 0!==t?t:Promise}},6716:function(e,t,i){"use strict";i.d(t,{x:function(){return l}});var r=i(655),n=i(1480),o=i(5720),s=(0,i(1819).d)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),a=i(3699),d=i(8846),l=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new c(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s},t.prototype.next=function(e){var t=this;(0,d.x)((function(){var i,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.XA)(t.currentObservers),s=o.next();!s.done;s=o.next()){s.value.next(e)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}}}))},t.prototype.error=function(e){var t=this;(0,d.x)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var i=t.observers;i.length;)i.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,d.x)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,i=this,r=i.hasError,n=i.isStopped,s=i.observers;return r||n?o.Lc:(this.currentObservers=null,s.push(e),new o.w0((function(){t.currentObservers=null,(0,a.P)(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,i=t.hasError,r=t.thrownError,n=t.isStopped;i?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new n.y;return e.source=this,e},t.create=function(e,t){return new c(e,t)},t}(n.y),c=function(e){function t(t,i){var r=e.call(this)||this;return r.destination=t,r.source=i,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)},t.prototype.error=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:o.Lc},t}(l)},5642:function(e,t,i){"use strict";i.d(t,{Hp:function(){return f},Lv:function(){return p}});var r=i(655),n=i(8474),o=i(5720),s=i(3912),a=i(5);function d(){}var l=c("C",void 0,void 0);function c(e,t,i){return{kind:e,value:t,error:i}}var u=i(8380),g=i(8846),p=function(e){function t(t){var i=e.call(this)||this;return i.isStopped=!1,t?(i.destination=t,(0,o.Nn)(t)&&t.add(i)):i.destination=b,i}return(0,r.ZT)(t,e),t.create=function(e,t,i){return new f(e,t,i)},t.prototype.next=function(e){this.isStopped?m(function(e){return c("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?m(c("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?m(l,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.w0),h=Function.prototype.bind;function v(e,t){return h.call(e,t)}var y=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){w(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){w(e)}else w(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){w(e)}},e}(),f=function(e){function t(t,i,r){var o,a,d=e.call(this)||this;(0,n.m)(t)||!t?o={next:null!=t?t:void 0,error:null!=i?i:void 0,complete:null!=r?r:void 0}:d&&s.v.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return d.unsubscribe()},o={next:t.next&&v(t.next,a),error:t.error&&v(t.error,a),complete:t.complete&&v(t.complete,a)}):o=t;return d.destination=new y(o),d}return(0,r.ZT)(t,e),t}(p);function w(e){s.v.useDeprecatedSynchronousErrorHandling?(0,g.O)(e):(0,a.h)(e)}function m(e,t){var i=s.v.onStoppedNotification;i&&u.z.setTimeout((function(){return i(e,t)}))}var b={closed:!0,next:d,error:function(e){throw e},complete:d}},5720:function(e,t,i){"use strict";i.d(t,{Lc:function(){return d},w0:function(){return a},Nn:function(){return l}});var r=i(655),n=i(8474),o=(0,i(1819).d)((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}})),s=i(3699),a=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,i,s,a;if(!this.closed){this.closed=!0;var d=this._parentage;if(d)if(this._parentage=null,Array.isArray(d))try{for(var l=(0,r.XA)(d),u=l.next();!u.done;u=l.next()){u.value.remove(this)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else d.remove(this);var g=this.initialTeardown;if((0,n.m)(g))try{g()}catch(e){a=e instanceof o?e.errors:[e]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var h=(0,r.XA)(p),v=h.next();!v.done;v=h.next()){var y=v.value;try{c(y)}catch(e){a=null!=a?a:[],e instanceof o?a=(0,r.ev)((0,r.ev)([],(0,r.CR)(a)),(0,r.CR)(e.errors)):a.push(e)}}}catch(e){i={error:e}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}if(a)throw new o(a)}},e.prototype.add=function(t){var i;if(t&&t!==this)if(this.closed)c(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,s.P)(t,e)},e.prototype.remove=function(t){var i=this._finalizers;i&&(0,s.P)(i,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),d=a.EMPTY;function l(e){return e instanceof a||e&&"closed"in e&&(0,n.m)(e.remove)&&(0,n.m)(e.add)&&(0,n.m)(e.unsubscribe)}function c(e){(0,n.m)(e)?e():e.unsubscribe()}},3912:function(e,t,i){"use strict";i.d(t,{v:function(){return r}});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2566:function(e,t,i){"use strict";i.d(t,{x:function(){return n}});var r=i(655);function n(e,t,i,r,n){return new o(e,t,i,r,n)}var o=function(e){function t(t,i,r,n,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=i?function(e){try{i(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=n?function(e){try{n(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,r.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(i(5642).Lv)},8639:function(e,t,i){"use strict";i.d(t,{P:function(){return u},z:function(){return c}});var r=i(655),n=function(e){function t(t,i){return e.call(this)||this}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i(5720).w0),o={setInterval:function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var s=o.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,(0,r.ev)([e,t],(0,r.CR)(i))):setInterval.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(i)))},clearInterval:function(e){var t=o.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},s=i(3699),a=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.scheduler=t,r.work=i,r.pending=!1,r}return(0,r.ZT)(t,e),t.prototype.schedule=function(e,t){var i;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),o.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,t,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&o.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var i,r=!1;try{this.work(e)}catch(e){r=!0,i=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,i=this.scheduler,r=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,s.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(n),d={now:function(){return(d.delegate||Date).now()},delegate:void 0},l=function(){function e(t,i){void 0===i&&(i=e.now),this.schedulerActionCtor=t,this.now=i}return e.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},e.now=d.now,e}(),c=new(function(e){function t(t,i){void 0===i&&(i=l.now);var r=e.call(this,t,i)||this;return r.actions=[],r._active=!1,r}return(0,r.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}},t}(l))(a),u=c},8380:function(e,t,i){"use strict";i.d(t,{z:function(){return n}});var r=i(655),n={setTimeout:function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=n.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,(0,r.ev)([e,t],(0,r.CR)(i))):setTimeout.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(i)))},clearTimeout:function(e){var t=n.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},6766:function(e,t,i){"use strict";i.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},3699:function(e,t,i){"use strict";function r(e,t){if(e){var i=e.indexOf(t);0<=i&&e.splice(i,1)}}i.d(t,{P:function(){return r}})},1819:function(e,t,i){"use strict";function r(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}i.d(t,{d:function(){return r}})},8846:function(e,t,i){"use strict";i.d(t,{O:function(){return s},x:function(){return o}});var r=i(3912),n=null;function o(e){if(r.v.useDeprecatedSynchronousErrorHandling){var t=!n;if(t&&(n={errorThrown:!1,error:null}),e(),t){var i=n,o=i.errorThrown,s=i.error;if(n=null,o)throw s}}else e()}function s(e){r.v.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=e)}},278:function(e,t,i){"use strict";function r(e){return e}i.d(t,{y:function(){return r}})},8474:function(e,t,i){"use strict";function r(e){return"function"==typeof e}i.d(t,{m:function(){return r}})},6798:function(e,t,i){"use strict";i.d(t,{e:function(){return n}});var r=i(8474);function n(e){return function(t){if(function(e){return(0,r.m)(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}},5:function(e,t,i){"use strict";i.d(t,{h:function(){return o}});var r=i(3912),n=i(8380);function o(e){n.z.setTimeout((function(){var t=r.v.onUnhandledError;if(!t)throw e;t(e)}))}},3379:function(e){"use strict";var t=[];function i(e){for(var i=-1,r=0;r<t.length;r++)if(t[r].identifier===e){i=r;break}return i}function r(e,r){for(var o={},s=[],a=0;a<e.length;a++){var d=e[a],l=r.base?d[0]+r.base:d[0],c=o[l]||0,u="".concat(l," ").concat(c);o[l]=c+1;var g=i(u),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==g)t[g].references++,t[g].updater(p);else{var h=n(p,r);r.byIndex=a,t.splice(a,0,{identifier:u,updater:h,references:1})}s.push(u)}return s}function n(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var o=r(e=e||[],n=n||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=i(o[s]);t[a].references--}for(var d=r(e,n),l=0;l<o.length;l++){var c=i(o[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=d}}},569:function(e){"use strict";var t={};e.exports=function(e,i){var r=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},9216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,i){"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,n&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},7656:function(){"use strict";window.OB_VIDEO_VERSION="v1.245.0"},4528:function(e,t,i){"use strict";i.d(t,{dj:function(){return o},fP:function(){return n}});var r=i(4452);const n={providers:{[r.B.Aniview]:{providerPath:"aniview/index"},[r.B.Vidazoo]:{providerPath:"vidazoo/index"},[r.B.OPA]:{providerPath:"opa/index"},[r.B.NATIVETOVIDEO]:{providerPath:"n2v/index"},[r.B.VI]:{providerPath:"vi/index"}}},o={Prod:"https://videoevents.outbrain.com/events/recordOBV",Sim:"https://sim-eventsrecorder.outbrain.com/EventsRecorder/api/events/recordOBV"};t.ZP=n},8178:function(e,t,i){"use strict";i.d(t,{d:function(){return s}});var r=i(2798),n=i(4452),o=i(7589);const s={providers:[{defaultProvider:!0,name:n.B.OPA,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:4e3},{defaultProvider:!0,name:n.B.Vidazoo,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:3e3},{defaultProvider:!0,name:n.B.Aniview,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:3e3},{defaultProvider:!1,name:n.B.VI,pauseOutOfView:!1,playMode:r.Z.Load,currentPlayMode:o.w.OutOfView,playWaitingTime:3e3},{defaultProvider:!1,name:n.B.NATIVETOVIDEO,pauseOutOfView:!1,playMode:r.Z.View,currentPlayMode:o.w.OutOfView,playWaitingTime:3e3}]}},7927:function(e,t,i){"use strict";i.d(t,{M:function(){return s}});var r=i(3058),n=i(5148),o=i(3766);class s{static shouldHoldVidgetByParallelPlayPolicy(e,t){switch(e.getPlayMode()){case r.b.Avoid:return this.getVideoTagsPlayingOnPage().length>0;case r.b.AvoidInViewport:return e.isInView()&&s.isVideoPlayingInViewport();case r.b.AllowInstream:return s.isOutstreamVideoPlayingInViewport(t);case r.b.Allow:default:return!1}}static shouldDisposeVidget(e,t){const i=Array.from(document.getElementsByTagName("video")),n=t?Array.from(t.getElementsByTagName("video")):[];let o=!1;for(let e=0;e<i.length;e++)if(!i[e].isSameNode(n[e])){o=!0;break}return r.b.Strict===e&&o}static getVideoTagsPlayingOnPage(){const e=document.getElementsByTagName("video");return Array.from(e).filter((e=>e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2))}static isVideoPlayingInViewport(e=!0){const t=s.getVideoTagsPlayingOnPage();if(0===t.length)return!1;const i=e?0:1;return t.filter((e=>n.Z.viewPercentage(e)>0)).length>i}static isOutstreamVideoPlayingInViewport(e){const t=s.getVideoTagsPlayingOnPage();if(0===t.length)return!1;const i=e.filter((e=>e.isInstream()&&e.statusChange$.value===o.M.Playing));return t.length!==i.length}}},5022:function(e,t,i){"use strict";var r;i.d(t,{t:function(){return r}}),function(e){e.Lazy="regular",e.Eager="slider",e.Override="sliderAlwaysRight",e.NoScroll="noScroll",e.FeedBorders="feedBorders"}(r||(r={}))},7589:function(e,t,i){"use strict";i.d(t,{J:function(){return S},w:function(){return w}});var r=i(6716),n=i(8639),o=i(6798),s=i(2566);var a=i(278);function d(e,t){return e===t}function l(e){return(0,o.e)((function(t,i){try{t.subscribe(i)}finally{i.add(e)}}))}var c=i(655),u=i(8474);var g=i(1480),p=i(6766);var h="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";var v=i(5);function y(e){if(e instanceof g.y)return e;if(null!=e){if(function(e){return(0,u.m)(e[p.L])}(e))return s=e,new g.y((function(e){var t=s[p.L]();if((0,u.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((o=e)&&"number"==typeof o.length&&"function"!=typeof o)return n=e,new g.y((function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()}));if(r=e,(0,u.m)(null==r?void 0:r.then))return i=e,new g.y((function(e){i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,v.h)}));if(function(e){return Symbol.asyncIterator&&(0,u.m)(null==e?void 0:e[Symbol.asyncIterator])}(e))return f(e);if(function(e){return(0,u.m)(null==e?void 0:e[h])}(e))return t=e,new g.y((function(e){var i,r;try{for(var n=(0,c.XA)(t),o=n.next();!o.done;o=n.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}e.complete()}));if(function(e){return(0,u.m)(null==e?void 0:e.getReader)}(e))return f(function(e){return(0,c.FC)(this,arguments,(function(){var t,i,r;return(0,c.Jh)(this,(function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,(0,c.qq)(t.read())];case 3:return i=n.sent(),r=i.value,i.done?[4,(0,c.qq)(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,(0,c.qq)(r)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,i,r,n,o,s;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function f(e){return new g.y((function(t){(function(e,t){var i,r,n,o;return(0,c.mG)(this,void 0,void 0,(function(){var s,a;return(0,c.Jh)(this,(function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),i=(0,c.KL)(e),d.label=1;case 1:return[4,i.next()];case 2:if((r=d.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=d.sent(),n={error:a},[3,11];case 6:return d.trys.push([6,,9,10]),r&&!r.done&&(o=i.return)?[4,o.call(i)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}var w,m=i(5642);function b(e){void 0===e&&(e={});var t=e.connector,i=void 0===t?function(){return new r.x}:t,n=e.resetOnError,s=void 0===n||n,a=e.resetOnComplete,d=void 0===a||a,l=e.resetOnRefCountZero,c=void 0===l||l;return function(e){var t,r,n,a=0,l=!1,u=!1,g=function(){null==r||r.unsubscribe(),r=void 0},p=function(){g(),t=n=void 0,l=u=!1},h=function(){var e=t;p(),null==e||e.unsubscribe()};return(0,o.e)((function(e,o){a++,u||l||g();var v=n=null!=n?n:i();o.add((function(){0!==--a||u||l||(r=P(h,c))})),v.subscribe(o),!t&&a>0&&(t=new m.Hp({next:function(e){return v.next(e)},error:function(e){u=!0,g(),r=P(p,s,e),v.error(e)},complete:function(){l=!0,g(),r=P(p,d),v.complete()}}),y(e).subscribe(t))}))(e)}}function P(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(!0!==t){if(!1!==t){var n=new m.Hp({next:function(){n.unsubscribe(),e()}});return t.apply(void 0,(0,c.ev)([],(0,c.CR)(i))).subscribe(n)}}else e()}!function(e){e[e.OutOfView=0]="OutOfView",e[e.InView=1]="InView"}(w||(w={}));class S{static debounceTime=500;static elementInViewChange(e,t){if(!window.IntersectionObserver)return new r.x;const i=new r.x,c=new r.x;let u=new IntersectionObserver((e=>{c.next(e)}),{root:null,rootMargin:"0px",threshold:isNaN(t.threshold)?1:t.threshold});var g,p,h,v;return u.observe(e),c.pipe((h=t.debounce||S.debounceTime,void 0===v&&(v=n.z),(0,o.e)((function(e,t){var i=null,r=null,n=null,o=function(){if(i){i.unsubscribe(),i=null;var e=r;r=null,t.next(e)}};function a(){var e=n+h,r=v.now();if(r<e)return i=this.schedule(void 0,e-r),void t.add(i);o()}e.subscribe((0,s.x)(t,(function(e){r=e,n=v.now(),i||(i=v.schedule(a,h),t.add(i))}),(function(){o(),t.complete()}),void 0,(function(){r=i=null})))}))),(g=(e,t)=>e[0].isIntersecting===t[0].isIntersecting,void 0===p&&(p=a.y),g=null!=g?g:d,(0,o.e)((function(e,t){var i,r=!0;e.subscribe((0,s.x)(t,(function(e){var n=p(e);!r&&g(i,n)||(r=!1,i=n,t.next(e))})))})))).subscribe((e=>{i.next(e[0].isIntersecting?w.InView:w.OutOfView)})),i.pipe(l((()=>{c.unsubscribe(),u.disconnect()})),b())}static measureViewability(e,t){if(!window.IntersectionObserver)return new r.x;let i;const n=new r.x;let o=new IntersectionObserver((e=>{e[0].isIntersecting?i=setTimeout((()=>{((e,t)=>{e.disconnect(),n.next(t.intersectionRatio)})(o,e[0])}),t.timeInMilliseconds):i&&clearTimeout(i)}),{root:null,rootMargin:"0px",threshold:t.threshold||1});return o.observe(e),n.pipe(l((()=>{i&&clearTimeout(i),o?.disconnect()})),b())}static isElementInViewportRange(e,t){const i=e.getBoundingClientRect(),r=i.top-t<=window.innerHeight,n=i.bottom+t>=0;return r&&n}}},3736:function(e,t,i){"use strict";var r;i.d(t,{t:function(){return r}}),function(e){e.Loaded="VIDGET_LOADED",e.AdLoaded="VIDGET_AD_LOADED",e.Viewability="VIDGET_VIEWABILITY",e.Play="PLAY",e.Pause="PAUSE",e.Resume="RESUME",e.Complete="COMPLETE",e.Click="CLICK",e.Mute="MUTE",e.Unmute="UNMUTE",e.Close="CLOSE",e.Error="ERROR",e.FirstQuartile="FIRST_QUARTILE",e.SecondQuartile="SECOND_QUARTILE",e.ThirdQuartile="THIRD_QUARTILE",e.Skip="SKIP",e.EngagedPlay="ENGAGED_PLAY",e.PixelFired="PIXEL_FIRED",e.Debug="VIDGET_DEBUG",e.VideoRejected="VIDEO_REJECTED",e.PlayerViewability="VIDGET_PLAYER_VIEWABILITY",e.Verbose="VIDGET_VERBOSE",e.Pending="VIDGET_PENDING",e.IterationCanceled="VIDGET_ITERATION_CANCELED",e.Ready="READY",e.SliderSkipped="SLIDER_SKIPPED",e.ProviderPass="PROVIDER_PASS",e.StartRequest="VIDGET_START_REQ",e.PlayReadyRequest="VIDGET_START_READY",e.FillCount="FILL_COUNT",e.KeepWatching="KEEP_WATCHING",e.VidgetConfigError="VIDGET_CONFIG_ERROR",e.VidgetFailure="VIDGET_FAILURE",e.ProviderFailure="PROVIDER_FAILURE",e.vidgetLog="VIDGET_LOG",e.VidgetFeature="VIDGET_FEATURE",e.ReportClick="REPORT_CLICK",e.VidgetReport="VIDGET_REPORT",e.VidgetPlacementViewability="VIDGET_PLACEMENT_VIEWABILITY"}(r||(r={}))},5259:function(e,t,i){"use strict";var r;i.d(t,{i:function(){return r}}),function(e){e[e.INFO=0]="INFO",e[e.DEBUG=1]="DEBUG",e[e.VERBOSE=2]="VERBOSE"}(r||(r={}))},6022:function(e,t,i){"use strict";var r;i.d(t,{t:function(){return r}}),function(e){e.None="none",e.AfterEach="afterEach",e.AfterAll="afterAll",e.PlayOnce="playOnce"}(r||(r={}))},5187:function(e,t,i){"use strict";var r;i.d(t,{E:function(){return r}}),function(e){e.None="None",e.MOACover="MOA VRL COVER",e.MOA="MOA",e.ATF="ATF"}(r||(r={}))},3058:function(e,t,i){"use strict";var r;i.d(t,{b:function(){return r}}),function(e){e.Avoid="avoid",e.Strict="strict",e.Allow="allow",e.AllowInstream="allow instream",e.AvoidInViewport="avoid in viewport"}(r||(r={}))},2753:function(e,t,i){"use strict";var r;i.d(t,{h:function(){return r}}),function(e){e.InWidget="inWidget",e.AboveWidget="aboveWidget",e.BelowWidget="belowWidget",e.Midroll="midroll"}(r||(r={}))},4452:function(e,t,i){"use strict";var r;i.d(t,{B:function(){return r}}),function(e){e.Aniview="Aniview",e.Vidazoo="Vidazoo",e.OPA="OPA",e.VI="VI",e.NATIVETOVIDEO="NATIVETOVIDEO"}(r||(r={}))},2798:function(e,t,i){"use strict";var r;i.d(t,{Z:function(){return r}}),function(e){e.Load="auto-play",e.View="in-view",e.ViewPreload="in-view-preload"}(r||(r={}))},9202:function(e,t,i){"use strict";var r;i.d(t,{S:function(){return r}}),function(e){e[e.none=0]="none",e[e.outstream=1]="outstream",e[e.instream=2]="instream"}(r||(r={}))},8347:function(e,t,i){"use strict";var r;i.d(t,{o:function(){return r}}),function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(r||(r={}))},3766:function(e,t,i){"use strict";var r;i.d(t,{M:function(){return r}}),function(e){e[e.Initialized=0]="Initialized",e[e.ReadyToPlay=1]="ReadyToPlay",e[e.Playing=2]="Playing",e[e.NotPlaying=3]="NotPlaying",e[e.Finished=4]="Finished",e[e.Failure=5]="Failure"}(r||(r={}))},7917:function(e,t,i){"use strict";i.r(t),i.d(t,{ViStaticSettings:function(){return o}});var r=i(8178),n=i(4452);const o={actualReloadCount:10,configuredReloadCount:10,configuredReloadTime:10,isSyndicationAllowed:!0,isVideoReel:!0,providers:[r.d.providers.find((e=>e.name===n.B.VI))],vidgetContentSource:"syndication",vidgetFootprint:"standard",recMode:"odb_dynamic_video-reel"}},5148:function(e,t){"use strict";class i{static loadScript(e,t="head"){return new Promise(((i,r)=>{const n=document.createElement("script");n.src=e,n.onload=i,n.onerror=r,document.getElementsByTagName(t)[0].appendChild(n)}))}static isMobile(){return/(iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/.test(navigator.userAgent.toLowerCase())}static nodeToString(e){let t=document.createElement("div");t.appendChild(e.cloneNode(!0));let i=t.innerHTML;return t=e=null,i}static viewPercentage(e){if(!e)return 0;let t=e.getBoundingClientRect(),r=i.getViewportSizeGlobal().height,n=e.clientHeight;if(!n)return 0;const o=t.top,s=t.top+n;let a=0;if(o>0){if(o>r)return 0;if(s<r)return 100;a=r-o}else{if(s<0)return 0;a=s>r?r:s}return Math.round(100*a/n)}static getViewportSizeGlobal(){let e,t,i,r={height:0,width:0};return e=void 0!==window.innerWidth,t=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth,i=!1===e&&!1===t,e?(r.height=window.innerHeight,r.width=window.innerWidth):t?(r.height=document?.documentElement.clientHeight,r.width=document?.documentElement.clientWidth):i&&(r.height=document.getElementsByTagName("body")[0].clientHeight,r.width=document.getElementsByTagName("body")[0].clientWidth),r}static performRandomWithBalance(e){let t=0,i=[];if(!e)return null;for(let r in e)t+=e[r],i.push({name:r,balance:e[r]});t<1&&(i[0].balance+=1-t),t>1&&(i[0].balance-=t-1);const r=Math.random();for(let e=0,t=0;e<i.length;e++){let n=i[e];if(r<n.balance+t)return n.name;t+=n.balance}return null}static isIframe(){try{return window.self!==window.top}catch(e){return console.error(e),!0}}static guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}static firePassbackScript(e,t){const i=document.createRange().createContextualFragment(e);document.body.appendChild(i),document.querySelector(`[data-widget-id="${t}"]`)?.remove()}static getSubtree(e){return e.shadowRoot||e}static firePixels(e,t,r,n,o){e.forEach((e=>{e=i.replaceMacros(e,t,r,n);(new Image).src=e,o&&o(e)}))}static replaceMacros(e,t,r,n){return e=i.replaceAll(e,"{{widget_id}}",t.widgetID),e=i.replaceAll(e,"{{publisher_id}}",r.publisherId),e=i.replaceAll(e,"{{rand}}",(Math.random()+1).toString(36).substring(2)),e=i.replaceAll(e,"{{req_id}}",t.reqID),e=i.replaceAll(e,"{{publisher_name}}",t.publisherName),e=i.replaceAll(e,"{{doc_id}}",t.docId),e=i.replaceAll(e,"{{time_stamp}}",Date.now().toString()),n&&n.campaignId&&(e=i.replaceAll(e,"{{campaign_id}}",n.campaignId.toString())),n&&n.marketerName&&(e=i.replaceAll(e,"{{adv_name}}",n.marketerName)),e}static replaceAll(e,t,i){return e.replace(new RegExp(t,"g"),i)}static getSiblingsBetweenRecs(e,t){const i=e.parentNode?.children,r=t.parentNode?.children;if(!i||!r)throw Error("invalid htmlElement");let n=Array.from(i).concat(e.parentNode!==t.parentNode?Array.from(r):[]),o=[],s=!1;for(let i of n){let r=i===e,n=i===t;if(s||r)if(r){if(n)break;s=!0}else if(s){if(n)break;o.push(i)}}return o}}t.Z=i},3443:function(e,t,i){"use strict";i.d(t,{S:function(){return r}});const r=(...e)=>{const t=new URL(window.location.href);("true"===t.searchParams.get("dlog")||t.search.indexOf("dlog=true")>-1)&&console.log("Vidget:",...e)}},7402:function(e,t,i){"use strict";i.d(t,{r:function(){return v}});var r,n=i(5148),o=i(8347),s=i(3058),a=i(2753),d=i(4528),l=i(5259),c=i(8178);!function(e){e.None="none",e.Regular="regular",e.Slider="slider",e.SliderAlwaysRight="sliderAlwaysRight",e.NoScroll="noScroll",e.SliderOnFeedBorders="sliderOnFeedBorders"}(r||(r={}));var u=i(5022),g=i(6022),p=i(9202);var h=i(5187);class v{static widgetProxy=function(){if(window.OB_PROXY)return window.OB_PROXY;throw"fatal error, could not obtain obProxy"}();static getWidgetRequest(e,t,i){return v.widgetProxy.getRequest&&v.widgetProxy.getRequest(e,t,i)}static getWidgetRawResponse(e){return v.widgetProxy.getRawResponse&&v.widgetProxy.getRawResponse(e)}static getAbTestVal(e,t,i){const r=v.widgetProxy.getFeedFatherAB;if(r.constructor===Function&&r(e)){const n=r(e);if(n&&n!==i){const r=this.getWidgetRequest(e,t,i).split("-")[1];return r?n+"-"+r:n}return n}return v.getWidgetRequest(e,t,i)}static getCardIdx(e){return v.widgetProxy&&v.widgetProxy.getCardIdx?v.widgetProxy.getCardIdx(e):null}static getWidgetSetting(e,t,i){return v.widgetProxy.getSet(e,t,i)}static getWidgetSettings(e){const t=v.getWidgetIndex(e),i=t?"outbrain_widget_"+t:"outbrain_widget_0",r=v.getWidgetElement(e),a=v.widgetProxy.getDataSrcFinalUrl?v.widgetProxy.getDataSrcFinalUrl(e):void 0;let d={widgetID:v.getWidgetId(e),reportedWidgetId:v.getReportedWidgetJSId(e,r),widgetIdx:t||0,isSmartFeed:v.isSmartFeed(r),pubID:v.getWidgetRequest(e,"pid",null),reqID:v.getWidgetRequest(e,"req_id",-1),pageViewId:v.getWidgetRequest(e,"pvId",""),containerID:i,docId:v.getWidgetRequest(e,"did",-1),sourceId:v.getWidgetRequest(e,"sid",null),lazyListingsPixel:v.getWidgetMeta(e,"lazyListingsPixel",null),datasrc:a||v.getDocUrl(r),parallelPlay:v.getWidgetSetting(e,"vidgetParallelPlay",s.b.AvoidInViewport),viewabiltyEventTime:v.getWidgetSetting(e,"vidgetViewabilityMinDuration",2),viewabilityPercentageThreshold:v.getWidgetSetting(e,"vidgetViewabilityPercentageThreshold",50),playerMaxWidth:this.getPlayerMaxWidth(v.getWidgetSetting(e,"vidgetPlayerMaximalWidth",null)),playerOrientation:o.o.Horizontal,screenOrientation:this.getScreenOrientation(),playOnlyOnWifi:v.getWidgetSetting(e,"vidgetPlayOnlyOnWifi",!0),reportedSubWidgetId:v.getReportedSubWidgetId(e,r),ccpaPrivacy:v.getWidgetRequest(e,"ccpa",null),abTestVal:v.getAbTestVal(e,"abTestVal","no_abtest")||"void",obRecsAbtestAndVars:v.getWidgetRequest(e,"obRecsAbtestAndVars",null),isIframe:n.Z.isIframe(),recsNumber:v.getWidgetRequest(e,"tcr",0),fAB:v.widgetProxy.getFeedFatherAB(e)?v.widgetProxy.getFeedFatherAB(e):"no_abtest",layeredTestInfo:v.getWidgetRequest(e,"layeredTestInfo",null),fid:v.getFeedFatherId(e,r),fIndex:v.getFeedFatherIndex(e,r),feedIdx:v.widgetProxy.getRequest(e,"feedIdx",null),cardIdx:v.getCardIdx(e),stickyPlayer:v.getStickyPlayerType(e),brandingType:v.getWidgetSetting(e,"whatIsBrandingType","Amelia + copy"),titleHeight:21,adBlockStatus:"true"===v.widgetProxy.getAdBlockerStatus(),feedVersion:v.widgetProxy.getRequest(e,"feedVersion",null),onlyVideoWidget:0===v.getWidgetRequest(e,"tcr",0)||/odb_dynamic_video-reel/gi.test(v.getWidgetSetting(e,"recMode","")),odbVidTag:v.getWidgetRequest(e,"odb_vid_tag",null),externalId:v.getObExtId(e,"getExtId"),externalId2:v.getObExtId(e,"getExtId2"),featureFlag:v.getWidgetSetting(e,"vidgetFeatureFlag","GA"),vidgetOrientation:v.getWidgetSetting(e,"vidgetOrientation",o.o.Horizontal),nativeVideoMode:v.getWidgetSetting(e,"vidgetNativeVideo","never"),nativeVideoBtnPosition:v.getWidgetSetting(e,"nativeVideoBtnPosition","belowVideo"),nativeVideoLogoPosition:v.getWidgetSetting(e,"nativeVideoLogoPosition","belowVideo"),recMode:v.getWidgetSetting(e,"recMode",""),isVideoReel:/odb_dynamic_video-reel/gi.test(v.getWidgetSetting(e,"recMode","")),vidgetContentSource:v.getWidgetSetting(e,"VidgetContentSource","none"),reelsTransitionDuration:v.getWidgetSetting(e,"reelsTransitionDuration",20),maxOrganicRecs:v.getWidgetSetting(e,"maxOrganicVideos",5),isProviderControlledPauseOutOfView:!1,vidgetN2vBackfill:v.getWidgetSetting(e,"vidgetN2vBackfill",g.t.None),adLoaded:!1,displayAdMaxSize:v.getWidgetSetting(e,"displayAdSize",""),vidgetWaterfallOptimization:v.getWidgetSetting(e,"vidgetWaterfallOptimization",0),logLevel:v.getLogLevel(e),vidgetPassBack:v.getWidgetSetting(e,"vidgetPassBack",null),vidgetPassbackTrigger:v.getWidgetSetting(e,"vidgetPassbackTrigger","none"),vidgetTimeout:v.getVidgetTimeout(e),configuredReloadTime:1e3*parseInt(v.getWidgetSetting(e,"vidgetReloadTime",4)),configuredReloadCount:v.getWidgetSetting(e,"vidgetReloadCount",3),actualReloadCount:v.getWidgetSetting(e,"vidgetReloadCount",3),vidgetCustomControls:this.isValidJson(v.getWidgetSetting(e,"vidgetCustomControls","")),vidgetNativeEndCard:v.getWidgetSetting(e,"VidgetNativeEndCard",!0),vidgetDeliveryMode:v.getWidgetSetting(e,"vidgetDeliveryMode","progressive"),vidgetFootprint:v.getWidgetSetting(e,"vidgetFootprint","standard"),vidgetExternalMeasure:v.getWidgetSetting(e,"VidgetExternalMeasure",!1),firstAucationExceuted:!1,vidgetDynamicReloads:v.getWidgetSetting(e,"vidgetDynamicReloads",0),country:v.getWidgetRequest(e,"country",null),widgetPlatform:v.getWidgetRequest(e,"readerPlatform",null),publisherName:v.getWidgetRequest(e,"pubName",null),forceVI:v.getWidgetSetting(e,"forceVI",!1),bidFloor:v.getBidFloor(e),vidgetHLRExternalProviders:this.isValidJson(v.getWidgetSetting(e,"VidgetHLRExternalProviders",{})),providersChannelIds:this.getFallbackChannelId(e),contentCategory:v.getWidgetSetting(e,"vidgetContentCategory",null),language:v.getWidgetRequest(e,"lang",null),externalPublisherGroupId:v.getWidgetRequest(e,"expgid",null),lsd:v.getWidgetRequest(e,"lsd",""),t:v.getWidgetRequest(e,"t",""),permalinkFieldName:v.getPermalinkFieldName(e),installationKeyParam:v.getInstallationKeyParam(e),vidStatus:v.getVidStatus(e),consentData:v.getConsentData(e),fontFamily:v.getWidgetSetting(e,"dynamic:TitleFontFamily","inherit"),isReelV2:v.getWidgetSetting(e,"isReelV2",!1),isAdnginControl:v.getWidgetRequest(e,"isAdnginControl",!1),sellerJsonChain:{ver:"1.0",complete:1,nodes:[{asi:"outbrain.com",sid:v.getWidgetRequest(e,"schain","0000000000000000000000000000000000"),hp:1}]},dfpInfo:{isDfp:!1,dfpFrame:null,dfpOriginalHeight:null},playedReloadIndexes:[],optimizeLogicExcludeCount:{providers:v.getProvidersDefaultCounts(),waterfallExcludeList:[],numberOfStrikes:2},brandingTag:"",providers:v.getProvidersData(e),isReelWidget:v.isReelWidget(e),closeButton:!v.isReelWidget(e),vidgetExternalImpressionPixels:this.getExternalImpressionPixels(e),publisherImpId:v.getPublisherImpId(e),onyxFeedMode:v.getWidgetSetting(e,"onyxFeedMode",h.E.None),isSyndicationAllowed:!1,playerLocation:v.getPlayerLocation(e)};return d.isSyndicationAllowed=d.isVideoReel&&"syndication"===d.vidgetContentSource.toLowerCase(),d}static getVidgetTimeout(e){const t=v.getWidgetSetting(e,"vidgetTimeout",null);return t?1e3*t:null}static getBidFloor(e){return+v.getWidgetSetting(e,"vidgetOPABidFloor","")||null}static getLogLevel(e){const t=v.getWidgetSetting(e,"vidgetLogLevel","INFO").toUpperCase();return l.i[t]}static getProvidersDefaultCounts(){const e={};return Object.keys(d.ZP.providers).forEach((t=>e[t]=0)),e}static getPlayerLocation(e){switch(v.getWidgetSetting(e,"recMode","")){case"odb_dynamic_reel":return a.h.InWidget;case"odb_dynamic_video-reel":return a.h.AboveWidget;default:const t=v.getWidgetSetting(e,"placementType","footer");if(v.isInFeed(e)&&"in-article"!==t)return a.h.AboveWidget;const i=v.getQueryString("obLocation"),r=v.getWidgetSetting(e,"vidgetPlayerLocation",a.h.InWidget);return i||r}}static getObExtId(e,t){if(!v.widgetProxy||!v.widgetProxy[t])return null;try{return v.widgetProxy[t](e)}catch(e){throw"*** Get OB_ExtId from widget proxy failed for "+t+"***"}}static isReelWidget(e){return/odb_dynamic_reel/gi.test(v.getWidgetSetting(e,"recMode",""))}static isVrlHiddenMode(e){return"vrlHiddenMode"===e.featureFlag||(e.onyxFeedMode===h.E.None||"onyxNonHiddenMode"!==e.featureFlag)&&e.onyxFeedMode!==h.E.MOA&&(e.onyxFeedMode===h.E.ATF||e.onyxFeedMode===h.E.MOACover)}static getWidgetElement(e){return v.widgetProxy.getContainer(e)}static getDocUrl(e){const t=e.getAttribute("data-src");if(t&&t.includes("http"))return t;{const t=e.getAttribute("data-ob-contentUrl");if(t)return t;const i=e.getAttribute("data-ob-bundleUrl");if(i)return i;const r=e.getAttribute("data-ob-portalUrl");if(r)return r}return window.location.href}static getProvidersData(e){let t=v.getQueryString("playMode"),i=[];const r=v.getWidgetSetting(e,"vidgetProvidersWaterfall",this.getDefaultProvidersWaterfallAsString());let n=v.getWidgetSetting(e,"vidgetPlayMode",void 0);try{n=JSON.parse(n)}catch(e){n=null}return n&&!Array.isArray(n)&&(t=t||n.globalPlayMode||null,n=null),r&&(i=r.split(",").map((e=>{e=e.trim();const i=n?.find((t=>t.name===e));return{name:e,playMode:t||i?.playMode||c.d.providers?.find((t=>t.name===e))?.playMode,currentPlayMode:c.d.providers?.find((t=>t.name===e))?.currentPlayMode,pauseOutOfView:i?.pauseOutOfView||c.d.providers?.find((t=>t.name===e))?.pauseOutOfView,playWaitingTime:i?.playWaitingTime||c.d.providers?.find((t=>t.name===e))?.playWaitingTime}})),i&&i.length)?i:c.d.providers?.filter((e=>e.defaultProvider))}static getDefaultProvidersWaterfallAsString(){const e=c.d.providers?.filter((e=>e.defaultProvider));return e.map((e=>e.name)).join(",")}static isInFeed(e){const t=!!v.widgetProxy.getFeedParentWidget(e),i="2"===v.widgetProxy.getRequest(e,"feedVersion",null);return!(!t||!i)}static getStickyPlayerType(e){switch(v.getQueryString("obSticky")||v.getWidgetSetting(e,"vidgetActivateStickyPlayer","none").toString()){case r.None:default:return null;case r.Regular:return u.t.Lazy;case r.Slider:return u.t.Eager;case r.SliderAlwaysRight:return u.t.Override;case r.NoScroll:return u.t.NoScroll;case r.SliderOnFeedBorders:return u.t.FeedBorders}}static getPlayerMaxWidth(e){const t={horizontal:null,vertical:null},i=v.isValidJson(e);return i&&isNaN(Number(e))?(isNaN(Number(i.horizontal))||0==i.horizontal||(t.horizontal=i.horizontal),isNaN(Number(i.vertical))||0==i.vertical||(t.vertical=i.vertical)):t.horizontal=isNaN(Number(e))||0==e?null:e,t}static getScreenOrientation(){return window.matchMedia("(orientation: portrait)").matches?o.o.Vertical:o.o.Horizontal}static getPublisherImpId(e){const t=v.widgetProxy.getPubImpId&&v.widgetProxy.getPubImpId(e);return t?encodeURIComponent(t):null}static isValidJson(e){try{return JSON.parse(e)}catch(e){return}}static getQueryString(e){let t=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(window.location.href);return t?t[1]:null}static getWidgetId(e){return v.getWidgetRequest(e,"widgetJsId",v.widgetProxy.getWidgetId(e))}static getWidgetIndex(e){return v.widgetProxy.getWidgetIndex?v.widgetProxy.getWidgetIndex(e):null}static getReportedWidgetJSId(e,t){let i=v.getWidgetId(e);if(v.isSmartFeed(t)){const t=v.widgetProxy.getFeedParentWidget?v.widgetProxy.getFeedParentWidget(e):e;i=v.getWidgetId(t)}return i}static getFeedFatherId(e,t){if(v.isSmartFeed(t)){const t=v.widgetProxy.getFeedParentWidget?v.widgetProxy.getFeedParentWidget(e):e;return v.getWidgetRequest(t,"wnid",null)}return null}static getFeedFatherIndex(e,t){if(v.isSmartFeed(t)){const t=v.widgetProxy.getFeedParentWidget?v.widgetProxy.getFeedParentWidget(e):e;return v.getWidgetIndex(t)}return null}static isSmartFeed(e){return!(!e||!(e.getAttribute&&(e.getAttribute("data-feed-idx")||e.getAttribute("data-card-idx"))||e.host?.getAttribute("data-feed-idx")||e.host?.getAttribute("data-card-idx")))}static getReportedSubWidgetId(e,t){let i=v.getWidgetId(e);return v.isSmartFeed(t)?i:null}static getWidgetMeta(e,t,i){if(v.widgetProxy&&"function"==typeof v.widgetProxy.getMeta)try{return v.widgetProxy.getMeta(e,t,i)}catch(e){throw"*** Get widget meta from widget proxy failed ***"}return null}static getExternalImpressionPixels(e){const t=v.getWidgetSetting(e,"vidgetExternalImpressionPixels",void 0);return t?t.split(",").map((e=>e.trim())):void 0}static getFallbackChannelId(e){const t={};return t.Aniview=v.getWidgetRequest(e,"fallbackChannelIdAniview",null),t}static getPermalinkFieldName(e){return v.widgetProxy.getPermalinkFieldName&&v.widgetProxy.getPermalinkFieldName(e)||"permalink"}static getInstallationKeyParam(e){return v.widgetProxy.getInstallationKey&&v.widgetProxy.getInstallationKey(e)}static getConsentData(e){const t=v.getWidgetRequest(e,"cnsntv2",null);return t||v.getWidgetRequest(e,"cnsnt","")}static getVidStatus(e){let t;try{const i=v.getWidgetId(e),[r,n]=v.getQueryString("forceVid")?.split(":");r===i&&null!=n&&(t=parseInt(n))}catch(e){t=null}return t||v.getWidgetRequest(e,"vid",p.S.outstream)}}},655:function(e,t,i){"use strict";i.d(t,{CR:function(){return d},FC:function(){return u},Jh:function(){return s},KL:function(){return g},XA:function(){return a},ZT:function(){return n},ev:function(){return l},mG:function(){return o},qq:function(){return c}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function o(e,t,i,r){return new(i||(i=Promise))((function(n,o){function s(e){try{d(r.next(e))}catch(e){o(e)}}function a(e){try{d(r.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((r=r.apply(e,t||[])).next())}))}function s(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(d){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(i=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,d])}}}Object.create;function a(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function l(e,t,i){if(i||2===arguments.length)for(var r,n=0,o=t.length;n<o;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}function c(e){return this instanceof c?(this.v=e,this):new c(e)}function u(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||a(e,t)}))})}function a(e,t){try{(i=n[e](t)).value instanceof c?Promise.resolve(i.value.v).then(d,l):u(o[0][2],i)}catch(e){u(o[0][3],e)}var i}function d(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){(function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)})(r,n,(t=e[i](t)).done,t.value)}))}}}Object.create},5434:function(e,t,i){var r={"./aniview":[1668,668],"./aniview/":[1668,668],"./aniview/aniview-player-settings.handler":[5372,372],"./aniview/aniview-player-settings.handler.ts":[5372,372],"./aniview/aniview.controller":[5565,565],"./aniview/aniview.controller.ts":[5565,565],"./aniview/config/aniview-player-events.enum":[1665,665],"./aniview/config/aniview-player-events.enum.ts":[1665,665],"./aniview/config/aniview.config":[7701,701],"./aniview/config/aniview.config.ts":[7701,701],"./aniview/index":[1668,668],"./aniview/index.ts":[1668,668],"./aniview/interfaces/aniview-audit-params.interface":[4080,80],"./aniview/interfaces/aniview-audit-params.interface.ts":[4080,80],"./aniview/interfaces/aniview-player-config.interface":[8459,459],"./aniview/interfaces/aniview-player-config.interface.ts":[8459,459],"./base/base.controller":[3402,402],"./base/base.controller.ts":[3402,402],"./n2v":[5180,688,180],"./n2v/":[5180,688,180],"./n2v/config/n2v.config":[7234,234],"./n2v/config/n2v.config.ts":[7234,234],"./n2v/index":[5180,688,180],"./n2v/index.ts":[5180,688,180],"./n2v/n2v.controller":[809,688,809],"./n2v/n2v.controller.ts":[809,688,809],"./opa":[2822,688,822],"./opa/":[2822,688,822],"./opa/config/opa-player-events.enum":[6527,527],"./opa/config/opa-player-events.enum.ts":[6527,527],"./opa/config/opa.config":[5512,512],"./opa/config/opa.config.ts":[5512,512],"./opa/enums/opa-player-error-level.enum":[5575,575],"./opa/enums/opa-player-error-level.enum.ts":[5575,575],"./opa/enums/pixel-event-type.enum":[8312,312],"./opa/enums/pixel-event-type.enum.ts":[8312,312],"./opa/enums/tracker-method.enum":[3588,588],"./opa/enums/tracker-method.enum.ts":[3588,588],"./opa/index":[2822,688,822],"./opa/index.ts":[2822,688,822],"./opa/interfaces/opa-audit-params.interface":[9926,926],"./opa/interfaces/opa-audit-params.interface.ts":[9926,926],"./opa/interfaces/opa-player-config.interface":[9829,829],"./opa/interfaces/opa-player-config.interface.ts":[9829,829],"./opa/interfaces/trackers.interface":[7768,768],"./opa/interfaces/trackers.interface.ts":[7768,768],"./opa/opa-player-settings.handler":[6265,265],"./opa/opa-player-settings.handler.ts":[6265,265],"./opa/opa.controller":[688,688],"./opa/opa.controller.ts":[688,688],"./vi":[182,182],"./vi/":[182,182],"./vi/config/vi-forced-settings.const":[7917],"./vi/config/vi-forced-settings.const.ts":[7917],"./vi/config/vi.config":[8132,132],"./vi/config/vi.config.ts":[8132,132],"./vi/enums/vi-ad-unit-type.enum":[1319,319],"./vi/enums/vi-ad-unit-type.enum.ts":[1319,319],"./vi/enums/vi-partner-ids.enum":[4031,31],"./vi/enums/vi-partner-ids.enum.ts":[4031,31],"./vi/enums/vi-player-events.enum":[6308,308],"./vi/enums/vi-player-events.enum.ts":[6308,308],"./vi/enums/vi-properties.enum":[1995,995],"./vi/enums/vi-properties.enum.ts":[1995,995],"./vi/enums/vi-traffic-type.enum":[7197,197],"./vi/enums/vi-traffic-type.enum.ts":[7197,197],"./vi/index":[182,182],"./vi/index.ts":[182,182],"./vi/interfaces/vi-audit-params.interface":[2721,721],"./vi/interfaces/vi-audit-params.interface.ts":[2721,721],"./vi/interfaces/vi-paid-play-params.interface":[8356,356],"./vi/interfaces/vi-paid-play-params.interface.ts":[8356,356],"./vi/interfaces/vi-player-config.interface":[3209,209],"./vi/interfaces/vi-player-config.interface.ts":[3209,209],"./vi/vi-player-settings.handler":[8960,960],"./vi/vi-player-settings.handler.ts":[8960,960],"./vi/vi.controller":[1724,724],"./vi/vi.controller.ts":[1724,724],"./vidazoo":[8334,334],"./vidazoo/":[8334,334],"./vidazoo/config/vidazoo-player-events.enum":[2586,586],"./vidazoo/config/vidazoo-player-events.enum.ts":[2586,586],"./vidazoo/config/vidazoo.config":[4727,727],"./vidazoo/config/vidazoo.config.ts":[4727,727],"./vidazoo/index":[8334,334],"./vidazoo/index.ts":[8334,334],"./vidazoo/interfaces/vidazoo-audit-params.interface":[8147,147],"./vidazoo/interfaces/vidazoo-audit-params.interface.ts":[8147,147],"./vidazoo/vidazoo-player-settings.handler":[1848,848],"./vidazoo/vidazoo-player-settings.handler.ts":[1848,848],"./vidazoo/vidazoo.controller":[417,417],"./vidazoo/vidazoo.controller.ts":[417,417]};function n(e){if(!i.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return Promise.all(t.slice(1).map(i.e)).then((function(){return i(n)}))}n.keys=function(){return Object.keys(r)},n.id=5434,e.exports=n}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,exports:{}};return i[e](o,o.exports,n),o.exports}n.m=i,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{31:"2122948a520a185afc42",80:"6b68f4bcd6d954e75b7a",132:"80e2f81fb45571b07415",147:"d29d7811336ef43fbd99",180:"21a4337c418bd708b7f2",182:"0cd0fca88435062e2f41",197:"b3edee3b8b13e915e494",209:"175ef966360bc06255a0",234:"ed00793d8320b571417f",265:"5ad995ddf49a772162f2",308:"d936c012aef24c4cc14b",312:"8407b1a76db9a4987a8f",319:"a7ab1191e46bebc80e62",334:"81880c71f57faf73f08a",356:"785700a91d618635818a",372:"31a75ea85ea261ff7262",402:"f445b052c62373656f6a",417:"973002cc1712568c08ff",459:"08b10615ca04c6ff7c28",512:"6722145ed14dfac8a54b",527:"1b24a8f07431dfd38095",565:"d72bbde8a33c48453583",575:"6e2b9709c75fe05f8ef8",586:"f27c09b0feafc3ffe75a",588:"2c0b6d1c2208be929865",665:"d27a3460dbbda71f1fa5",668:"2d37678bffd21012f11b",688:"9bd6642a2c4de45b624a",701:"7f0195d95c007942a5af",721:"4da6fbe667ccc45cf714",724:"274e1597b755396951e7",727:"7b5bb7c0a7decba2ed99",768:"daeecd439216ad59e0ae",809:"4de9ab2c71993ee19b20",822:"726810bfd899ea226ac2",829:"3d0c6912ef8177368dae",848:"aeec87d0927a46f78fb7",926:"5658895df6cc55e6da41",960:"46581d8dff1cab9fd8fe",995:"8188f87fd08855862e96"}[e]+".js"},n.miniCssF=function(e){},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="vidget:",n.l=function(i,r,o,s){if(e[i])e[i].push(r);else{var a,d;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){a=u;break}}a||(d=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=i),e[i]=[r];var g=function(t,r){a.onerror=a.onload=null,clearTimeout(p);var n=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=g.bind(null,a.onerror),a.onload=g.bind(null,a.onload),d&&document.head.appendChild(a)}},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={179:0};n.f.j=function(t,i){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise((function(i,n){r=e[t]=[i,n]}));i.push(r[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=function(t,i){var r,o,s=i[0],a=i[1],d=i[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(d)d(n)}for(t&&t(i);l<s.length;l++)o=s[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkvidget=self.webpackChunkvidget||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.nc=void 0,function(){"use strict";var e=n(5148),t=n(3766),i=n(7927),r=n(6515),o=n(6798),s=n(2566);var a,d=n(3736),l=n(4452),c=n(4528),u=n(7402),g=n(5022);!function(e){e.TopRight="top-right",e.TopLeft="top-left",e.BottomRight="bottom-right",e.BottomLeft="bottom-left",e.PageCenter="page-center",e.FeedCenter="feed-center"}(a||(a={}));class p{static getVidgetData(t){let i={},r=p.prepareObjectData(t,"vidgetData"),n=p.prepareObjectData(t,"vidgetInstreamData");i.isReelWidget=u.r.isReelWidget(t);let o=u.r.getWidgetSetting(t,"vidgetIndexes",null);if(o=/^([0-9]+(,[0-9]+)*)?$/.test(o)&&!i.isReelWidget?o:"1","0"===o){const r=u.r.getWidgetElement(t);o=`0,${e.Z.getSubtree(r).querySelectorAll("[class*='ob-recIdx-']").length}`,i.coveredWidget=!0}let s=u.r.getWidgetSetting(t,"vidgetAdUnitType",null),a=0,d=0;const l=Array.from(new Set(o.split(",")));return l.length>=2&&l.sort(),o&&o.length&&(a=l.length&&parseInt(l[0])>0?parseInt(l[0])-1:0,d=l.length?parseInt(l[l.length-1])-1:0),i.firstIndex=a,i.lastIndex=d,i.indexes=l.length>1?Array.from({length:d-a+1},((e,t)=>t+a+1+"")):l,i.pubDomain=document.location.hostname||document.location.href,i.ctaText=r.ctaText||"",i.instream=s&&"instream"===s,i.unMuteOnMouseEnter=void 0!==r.unMuteOnMouseEnter&&r.unMuteOnMouseEnter,i.closeButton=void 0===r.closeButton||r.closeButton,i.initialDelay=p.setInitialDelay(r,t),i.consoleLog=void 0!==r.consoleLog&&r.consoleLog,i.sliderPercentBottom=p.getSliderPercentBottom(r.sliderPercentBottom),i.providerPlayerReuse=void 0!==r.providerPlayerReuse&&r.providerPlayerReuse,i.sticky=p.getStickyPlayerSettings(r),i.avoidSliderWhenSmall=r.avoidSliderWhenSmall||-1/0,i.placementType=p.getPlacementType(r.stickyPlayer,u.r.getWidgetSetting(t,"placementType","footer")),i.specificAdvName=void 0!==r.specificAdvName?r.specificAdvName:void 0,i.ghostFixedSize=void 0!==r.ghostFixedSize&&r.ghostFixedSize,i.fillEvent=void 0!==r.fillEvent&&r.fillEvent,i.storeVast=void 0!==r.storeVast&&r.storeVast,i.vidgetContentSourceDemo=void 0!==r.vidgetContentSourceDemo&&r.vidgetContentSourceDemo,i.source=void 0!==r.source?r.source:void 0,i.title=void 0!==r.title?r.title:void 0,i.retries=void 0!==r.retries?r.retries:void 0,i.timeout=void 0!==r.timeout?r.timeout:void 0,i.contentProvider=void 0!==r.contentProvider?r.contentProvider:void 0,i.userId=r.userId||"5a9ea5a0225f7d0004c70045",i.xButtonLeft=r.xButtonLeft||!1,i.adIconUrl=r.adIconUrl||null,i.playerId="612b515fa94087000435798d",i.isReelWidget&&(i.playerId="62f270697d1306931b89c622"),i.channelId=r.channelId,i.viPubId=n.viPubId||r.viPubId,i.viChannelId=n.viChannelId||r.viChannelId,p.isInAppWidget(t)?p.setInAppWidgetConfig(i,r,t):i.inApp=!1,i.env=window.location.search.includes("videoEnv=test")?"TEST":"PROD",i.NativeVideoMaxStreamingDuration=void 0!==r.NativeVideoMaxStreamingDuration?parseInt(r.NativeVideoMaxStreamingDuration):30,i.opaDemoBidder=void 0!==r.opaDemoBidder?r.opaDemoBidder:void 0,i.workerBypass="boolean"==typeof r.workerBypass&&r.workerBypass,i.sliderBelowParent=r.sliderBelowParent||!1,i.gdprInt=this.getGdprOrLegit(t,r),i.header=void 0!==r.header?r.header:void 0,i.endCardDuration=void 0!==r.endCardDuration?r.endCardDuration:void 0,i.avoidParallelPlay=r.avoidParallelPlay||!1,i}static prepareObjectData(e,t){let i;try{i=JSON.parse(u.r.getWidgetSetting(e,t,"{}"))}catch(e){i={}}return i}static setInitialDelay(e,t){const i=u.r.getStickyPlayerType(t);return null!==i&&i!==g.t.Lazy?2e3:void 0!==e.initialDelay?1e3*parseInt(e.initialDelay):5e3}static getSliderPercentBottom(e){return void 0!==e?`${Math.max(0,(e-17)%100)}%`:"2px"}static getStickyPlayerSettings(e){return{sliderPosition:p.getSliderPosition(e.sliderPosition),sliderEntry:/^side|bottom$/gi.test(e.sliderEntry)?e.sliderEntry:"side",width:p.getStickyWidth(e.sliderWidthPercent,400),get height(){return Math.ceil(this.width/this.ratio)},ratio:16/9,widthDefault:400,sliderPercentBottom:e.sliderPercentBottom}}static getSliderPosition(e){switch(e){case"left":return a.BottomLeft;case"top-right":return a.TopRight;case"top-left":return a.TopLeft;case"page-center":return a.PageCenter;case"feed-center":return a.FeedCenter;default:return a.BottomRight}}static getStickyWidth(e,t){return e?Math.min(Math.max(e,50),250)*(t/100):t}static getPlacementType(e,t){return"slider"===e||"sliderAlwaysRight"===e?"slider":/in-article|sidebar|in-feed|header/gi.test(t)?t:"footer"}static isInAppWidget(e){const t="mobile-app-js-widget"===u.r.getWidgetSetting(e,"InstallationType","web-js-widget");let i=!1;const r=p.getWidgetExtraParams(e);return r&&r.indexOf("inApp=true")>-1&&(i=!0),t||i}static setInAppWidgetConfig(e,t,i){e.inApp=!0;const r=p.getWidgetExetrnalParamMap(i);if(e.inAppBridge=r&&"true"===r.inApp,e.appName=t.appName||r.appName||u.r.getWidgetRequest(i,"app_name",null),e.appCategory=t.appCategory||void 0,e.packageName=t.packageName||r.appBundle||u.r.getWidgetRequest(i,"app_id",null),e.bundleId=t.bundleId||r.appBundle||u.r.getWidgetRequest(i,"app_id",null),e.appStoreUrl=t.appStoreUrl||void 0,e.playStoreUrl=t.playStoreUrl||void 0,e.mobileUserId=p.getApiUserId(i),r.platform)e.platform=r.platform.toLowerCase();else{let t=navigator.userAgent;t.includes("iPhone")||t.includes("iPad")?e.platform="ios":t.includes("Android")&&(e.platform="android")}}static getGdprOrLegit(e,t){let i=u.r.getWidgetRequest(e,"gdpr",0);return 1==i&&"void"!=u.r.getWidgetRequest(e,"cnsnt","void")?1:"undefined"!==t.gdpr&&"legitimate"==t.gdpr?2:i}static getWidgetExetrnalParamMap(e){const t=p.getWidgetExtraParams(e),i={};return t&&t.split("&").reduce(((e,t)=>{const i=t.split("=");return e[i[0]]=i[1]?decodeURIComponent(i[1]):"",e}),i),i}static getWidgetExtraParams(e){if(u.r.widgetProxy&&"function"==typeof u.r.widgetProxy.getExtraParams)try{return u.r.widgetProxy.getExtraParams(e)}catch(e){throw"*** Get Widget extra params from widget proxy failed ***"}return null}static getApiUserId(e){if(u.r.widgetProxy&&"function"==typeof u.r.widgetProxy.getUserId)try{return u.r.widgetProxy.getUserId(e)}catch(e){throw"*** Get Api user id from widget proxy failed ***"}return null}}var h=n(2753),v=n(2798),y=n(5259);const f={[d.t.Debug]:y.i.DEBUG,[d.t.PixelFired]:y.i.DEBUG,[d.t.Pending]:y.i.DEBUG,[d.t.VidgetConfigError]:y.i.DEBUG,[d.t.ProviderPass]:y.i.DEBUG,[d.t.AdLoaded]:y.i.DEBUG,[d.t.Loaded]:y.i.DEBUG,[d.t.Pause]:y.i.DEBUG,[d.t.Resume]:y.i.DEBUG,[d.t.Mute]:y.i.DEBUG,[d.t.Unmute]:y.i.DEBUG,[d.t.FirstQuartile]:y.i.DEBUG,[d.t.SecondQuartile]:y.i.DEBUG,[d.t.ThirdQuartile]:y.i.DEBUG,[d.t.Viewability]:y.i.INFO,[d.t.Play]:y.i.INFO,[d.t.Complete]:y.i.INFO,[d.t.Click]:y.i.INFO,[d.t.Close]:y.i.INFO,[d.t.Error]:y.i.INFO,[d.t.Skip]:y.i.INFO};class w{sessionId;widgetSettings;vidgetData;auditUrl;widgetReqId;version;staticParams;constructor(e,t,i){this.sessionId=e,this.widgetSettings=t,this.vidgetData=i,this.widgetReqId=t.reqID,this.auditUrl=w.getAuditUrl(i),this.version=window.OB_VIDEO_VERSION?window.OB_VIDEO_VERSION:null,this.staticParams=this.prepareStaticParams()}prepareStaticParams(){return{abTestList:this.widgetSettings.layeredTestInfo,abTestVal:this.widgetSettings.abTestVal,adBlocker:this.widgetSettings.adBlockStatus,cardIdx:this.widgetSettings.cardIdx,ccpaPrivacy:this.widgetSettings.ccpaPrivacy,configuredNative:this.widgetSettings.nativeVideoMode,configuredProvidersCount:this.widgetSettings.providers?this.widgetSettings.providers.length:1,configuredReloadCount:this.widgetSettings.configuredReloadCount||1,contentSource:this.widgetSettings.vidgetContentSource&&"none"!==this.widgetSettings.vidgetContentSource?this.widgetSettings.vidgetContentSource:null,docId:this.widgetSettings.docId,featureFlag:this.widgetSettings.featureFlag,feedVersion:this.widgetSettings.feedVersion,gdpr:this.vidgetData.gdprInt,iframe:this.widgetSettings.isIframe,obRecsAbtestAndVars:this.widgetSettings.obRecsAbtestAndVars,odbVidTag:this.widgetSettings.odbVidTag,placementType:this.vidgetData.placementType,playerLocation:w.getAuditPlayerLocation(this.widgetSettings),publisherId:this.widgetSettings.pubID?this.widgetSettings.pubID:"10683",screenResolution:[window.screen.availHeight,"x",window.screen.availWidth].join(""),sessionId:this.sessionId,sourceDocUrl:this.widgetSettings.datasrc||window.location.href,sourceId:this.widgetSettings.sourceId?this.widgetSettings.sourceId:"6852067",sourcePvId:this.widgetSettings.pageViewId,sourceRequestId:this.widgetReqId,sourceSubWidgetId:this.widgetSettings.reportedSubWidgetId,sourceWidgetId:this.widgetSettings.reportedWidgetId?this.widgetSettings.reportedWidgetId:"AR_1",sticky:this.widgetSettings.stickyPlayer?this.widgetSettings.stickyPlayer.toString():null,subPlatform:this.vidgetData.inApp?this.vidgetData.inApp?"app":"web":null,version:this.version?this.version:null,waterfall:this.widgetSettings.providers?this.widgetSettings.providers.map((e=>e.name)).toString():null,widgetIdx:this.widgetSettings.widgetIdx,externalId:this.widgetSettings.externalId,externalIdSecondary:this.widgetSettings.externalId2,publisherImpId:this.widgetSettings.publisherImpId,isAdnginControl:this.widgetSettings.isAdnginControl,onyxFeedMode:this.widgetSettings.onyxFeedMode,supplyChain:this.widgetSettings.logLevel>=y.i.DEBUG?w.createSupplyChainString(this.widgetSettings):void 0}}send(t,i={},r=y.i.INFO){const n=f[t];if(this.widgetSettings.logLevel<r||null!=n&&this.widgetSettings.logLevel<n)return;const o=(new Date).toString();let s={eventType:t,...this.staticParams,...i,videoClickUrl:e.Z.guid(),localTime:o};w.beautifyAuditParams(s),s=w.clearNullValues(s);const a=new URL(this.auditUrl);Object.entries(s).forEach((([e,t])=>{a.searchParams.append(e,t)})),fetch(a.href)}static createSupplyChainString(e){const t=e.sellerJsonChain;return`${t.ver},${t.complete}!${t.nodes[0].asi},${t.nodes[0].sid},${t.nodes[0].hp},,,`}static beautifyAuditParams(e){e.playMode=w.getAuditPlayMode(e.playMode),e.provider=e.provider?.toUpperCase(),e.activeProvider=e.activeProvider?.toUpperCase()}static clearNullValues(e){return Object.keys(e).filter((t=>null!=e[t])).reduce(((t,i)=>({...t,[i]:e[i]})),{})}static getAuditUrl(e){switch(e.env){case"SIM":case"TEST":return c.dj.Sim;default:return c.dj.Prod}}static getAuditPlayMode(e){switch(e){case v.Z.Load:return"AUTO_PLAY";case v.Z.View:return"VIEW_TO_PLAY";case v.Z.ViewPreload:return"VIEW_PRELOAD";default:return"UNKNOWN"}}static getAuditPlayerLocation(e){return e.playerLocation?e.isReelWidget?h.h.Midroll:e.playerLocation:null}}var m,b=w,P=n(7589);!function(e){e.Sideways="sideways",e.TopDown="top-down",e.BottomUp="bottom-up"}(m||(m={}));class S{widgetElement;sliderSettings;widgetContainerElement;onSliderChangesCallback;static transitionDuration=300;static viewPortObserverSettings={threshold:.4,debounce:200};static sliderNoScrollTimeout=1e3+S.transitionDuration;static widgetPropsToCopyToPlaceholder=["marginTop","marginBottom","marginLeft","marginRight","paddingBottom","paddingTop","paddingLeft","paddingRight","height","width","top","left","position"];static widgetRestoredProperties=["top","left","position","transition"];placeholderElement;inViewSubscription;outOfViewSubscription;feedBordersWidgetSubscription;_isSliderActive=!1;originalWidgetProps={};sliderTrackingFunction=this.slideToPlace.bind(this);scrollEventListenerController;sliderChanges={isSliderHidden:!0,isSliderActive:!1,width:0,height:0};constructor(t,i,r,n){if(this.widgetElement=t,this.sliderSettings=i,this.widgetContainerElement=r,this.onSliderChangesCallback=n,i.sliderPosition!==a.PageCenter&&i.sliderPosition!==a.FeedCenter||(i.sliderEntry=m.BottomUp),i.sliderMode!==g.t.Override)if(i.sliderMode!==g.t.NoScroll)if(i.sliderMode!==g.t.FeedBorders)if(e.Z.viewPercentage(this.widgetElement)>=100*S.viewPortObserverSettings.threshold)this.widgetInViewPort();else{let e=this.widgetElement;this.sliderSettings.sliderMode===g.t.Eager&&(this.switchToSliderMode(!0),e=this.placeholderElement),this.widgetOutOfViewPort(e)}else this.handleFeedBordersOnWidget();else this.handleNoScrollBehavior();else this.switchToSliderMode(!0)}static convertToPx(e){return`${e}px`}static getSliderDimension(e){return"function"==typeof e?e():e}static calcMarginInPx(e,t){return t.endsWith("%")?parseFloat(t.slice(0,-1))/100*e:t.endsWith("px")?parseInt(t.slice(0,-2)):0}static getInnerDimensions(e){const t=getComputedStyle(e);let i=e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom);return{elementWidth:e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),elementHeight:i}}get isSliderActive(){return this._isSliderActive}destroySlider(){return new Promise((e=>{this.inViewSubscription?.unsubscribe(),this.outOfViewSubscription?.unsubscribe(),this.feedBordersWidgetSubscription?.unsubscribe(),window.removeEventListener("resize",this.sliderTrackingFunction),this.scrollEventListenerController?.abort(),this._isSliderActive?(this.handleEntry(),setTimeout((()=>{this.restoreOriginalWidgetProps(),this.placeholderElement?.remove(),e()}),S.transitionDuration)):e()}))}widgetOutOfViewPort(e){this.outOfViewSubscription=P.J.elementInViewChange(e,S.viewPortObserverSettings).subscribe((e=>{e===P.w.InView&&(this.outOfViewSubscription.unsubscribe(),this._isSliderActive&&this.switchToPlayerMode(),this.widgetInViewPort())}))}widgetInViewPort(){this.inViewSubscription=P.J.elementInViewChange(this.widgetElement,S.viewPortObserverSettings).subscribe((t=>{const i=this.sliderSettings.sliderMode===g.t.FeedBorders&&t===P.w.OutOfView&&this.widgetContainerElement&&e.Z.viewPercentage(this.widgetContainerElement)>=10;(this.sliderSettings.sliderMode!==g.t.FeedBorders&&t===P.w.OutOfView||i)&&(this.inViewSubscription.unsubscribe(),this._isSliderActive||this.switchToSliderMode(!1),this.widgetOutOfViewPort(this.placeholderElement))}))}handleFeedBordersOnWidget(){this.widgetContainerElement&&(this.feedBordersWidgetSubscription=P.J.elementInViewChange(this.widgetContainerElement,{threshold:0,debounce:50}).subscribe((t=>{t===P.w.InView&&(this.inViewSubscription?.unsubscribe(),this.outOfViewSubscription?.unsubscribe(),e.Z.viewPercentage(this.widgetElement)>=10&&this.widgetInViewPort(),setTimeout((()=>{!this._isSliderActive&&e.Z.viewPercentage(this.widgetElement)<=10&&this.switchToSliderMode(!1),this.placeholderElement&&this.widgetOutOfViewPort(this.placeholderElement)}),0)),t===P.w.OutOfView&&(this.outOfViewSubscription?.unsubscribe(),this.inViewSubscription?.unsubscribe(),this._isSliderActive&&this.switchToPlayerMode())})))}trackToPosition(e,t){const i=new AbortController;t(),window.addEventListener("scroll",t,{signal:i.signal}),setTimeout((()=>{i.abort()}),e)}restoreOriginalWidgetProps(){const e=this.placeholderElement.getBoundingClientRect();this.widgetElement.style.top=S.convertToPx(e.y),this.widgetElement.style.left=S.convertToPx(e.x),this.sliderSettings.sliderClassnames&&this.sliderSettings.sliderClassnames.length>0&&this.sliderSettings.sliderClassnames.forEach((e=>{this.widgetElement.classList.remove(e)}));const{elementWidth:t,elementHeight:i}=S.getInnerDimensions(this.placeholderElement);this.widgetElement.style.width=t+"px",this.widgetElement.style.height=i+"px",S.widgetRestoredProperties.forEach((e=>{this.widgetElement.style[e]=this.originalWidgetProps[e]}))}switchToPlayerMode(){this.sliderSettings.sliderClassnames&&this.sliderSettings.sliderClassnames.length>0&&this.sliderSettings.sliderClassnames.forEach((e=>{this.widgetElement.classList.remove(e)})),this.trackToPosition(S.transitionDuration,(()=>{const e=this.placeholderElement.getBoundingClientRect();this.widgetElement.style.top=S.convertToPx(e.y),this.widgetElement.style.left=S.convertToPx(e.x)})),this._isSliderActive=!1,this.trackResize(!1);const{elementWidth:e,elementHeight:t}=S.getInnerDimensions(this.placeholderElement);this.widgetElement.style.width=e+"px",this.widgetElement.style.height=t+"px",this.notifySliderChange({isSliderActive:this.isSliderActive,height:t,width:e}),setTimeout((()=>{this.placeholderElement.remove(),S.widgetRestoredProperties.forEach((e=>{this.widgetElement.style[e]=this.originalWidgetProps[e]}))}),S.transitionDuration)}switchToSliderMode(e){this.createPlaceholderElement(),this.widgetElement.insertAdjacentElement("afterend",this.placeholderElement),this.sliderSettings.sliderClassnames&&this.sliderSettings.sliderClassnames.length>0&&this.sliderSettings.sliderClassnames.forEach((e=>{this.widgetElement.classList.add(e)})),this.showSlider(e),this.trackResize(!0)}showSlider(e){if(!e){const e=this.placeholderElement.getBoundingClientRect();this.widgetElement.style.top=S.convertToPx(e.y),this.widgetElement.style.left=S.convertToPx(e.x)}this.widgetElement.style.transition="none",this.widgetElement.style.position="fixed",this.startSliderTransition(e),this.notifySliderChange({isSliderActive:this.isSliderActive,isSliderHidden:!1,height:S.getSliderDimension(this.sliderSettings.sliderHeight),width:S.getSliderDimension(this.sliderSettings.sliderWidth)})}createPlaceholderElement(){this.placeholderElement=document.createElement("div"),this.sliderSettings.sliderMode!==g.t.Override&&this.sliderSettings.sliderMode!==g.t.NoScroll&&S.widgetPropsToCopyToPlaceholder.forEach((e=>{this.placeholderElement.style[e]=this.widgetElement.style[e]})),S.widgetRestoredProperties.forEach((e=>{this.originalWidgetProps[e]=this.widgetElement.style[e]})),this.sliderSettings.placeholderClassname&&this.placeholderElement.classList.add(this.sliderSettings.placeholderClassname)}startSliderTransition(e){e&&this.handleEntry(),this.slideToPlace()}handleEntry(){const{horizontalMargin:e,verticalMargin:t}=this.calcHorizontalVerticalMargin();m.Sideways===this.sliderSettings.sliderEntry?this.setSidewaysEntry(t):this.setVerticalEntry(e)}setSidewaysEntry(e){switch(this.sliderSettings.sliderPosition){case a.TopLeft:this.widgetElement.style.top=S.convertToPx(e),this.widgetElement.style.left=S.convertToPx(-S.getSliderDimension(this.sliderSettings.sliderWidth));break;case a.BottomLeft:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-e),this.widgetElement.style.left=S.convertToPx(-S.getSliderDimension(this.sliderSettings.sliderWidth));break;case a.TopRight:this.widgetElement.style.top=S.convertToPx(e),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth);break;case a.PageCenter:case a.FeedCenter:break;case a.BottomRight:default:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-e),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth)}}setVerticalEntry(e){switch(m.BottomUp===this.sliderSettings.sliderEntry?this.widgetElement.style.top=S.convertToPx(window.innerHeight):m.TopDown===this.sliderSettings.sliderEntry&&(this.widgetElement.style.top=S.convertToPx(-S.getSliderDimension(this.sliderSettings.sliderHeight))),this.sliderSettings.sliderPosition){case a.TopLeft:case a.BottomLeft:this.widgetElement.style.left=S.convertToPx(e);break;case a.PageCenter:this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth/2-S.getSliderDimension(this.sliderSettings.sliderWidth)/2-e);break;case a.FeedCenter:const t=this.widgetContainerElement?.getBoundingClientRect();this.widgetElement.style.left=S.convertToPx(t.x+t.width/2-S.getSliderDimension(this.sliderSettings.sliderWidth)/2-e);break;case a.TopRight:case a.BottomRight:default:this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth-S.getSliderDimension(this.sliderSettings.sliderWidth)-e)}}slideToPlace(){const{horizontalMargin:e,verticalMargin:t}=this.calcHorizontalVerticalMargin();switch(this.widgetElement.style.transitionProperty="top, left, width, height",this.widgetElement.style.transitionDuration=`${S.transitionDuration}ms`,this.widgetElement.style.width=S.convertToPx(S.getSliderDimension(this.sliderSettings.sliderWidth)),this.widgetElement.style.height=S.convertToPx(S.getSliderDimension(this.sliderSettings.sliderHeight)),this._isSliderActive=!0,this.sliderSettings.sliderPosition){case a.TopLeft:this.widgetElement.style.top=S.convertToPx(t),this.widgetElement.style.left=S.convertToPx(e);break;case a.TopRight:this.widgetElement.style.top=S.convertToPx(t),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth-S.getSliderDimension(this.sliderSettings.sliderWidth)-e);break;case a.BottomLeft:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=S.convertToPx(e);break;case a.PageCenter:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth/2-S.getSliderDimension(this.sliderSettings.sliderWidth)/2-e);break;case a.FeedCenter:const i=this.widgetContainerElement?.getBoundingClientRect();this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=S.convertToPx(i.x+i.width/2-S.getSliderDimension(this.sliderSettings.sliderWidth)/2-e);break;case a.BottomRight:default:this.widgetElement.style.top=S.convertToPx(window.innerHeight-S.getSliderDimension(this.sliderSettings.sliderHeight)-t),this.widgetElement.style.left=S.convertToPx(window.document.documentElement.clientWidth-S.getSliderDimension(this.sliderSettings.sliderWidth)-e)}}trackResize(e){e?window.addEventListener("resize",this.sliderTrackingFunction):window.removeEventListener("resize",this.sliderTrackingFunction)}notifySliderChange(e){if(this.onSliderChangesCallback){const t={...this.sliderChanges,...e};this.onSliderChangesCallback({prev:this.sliderChanges,next:t}),this.sliderChanges=t}}handleNoScrollBehavior(){this.switchToSliderMode(!0),this.scrollEventListenerController=new AbortController;let e,t=!0;window.addEventListener("scroll",(()=>{t&&(t=!1,this.hideSlider()),window.clearTimeout(e),e=setTimeout((()=>{t=!0,this.showSlider(!0)}),S.sliderNoScrollTimeout)}),{signal:this.scrollEventListenerController.signal})}hideSlider(){this.handleEntry(),this.notifySliderChange({isSliderHidden:!0})}calcHorizontalVerticalMargin(){return{horizontalMargin:this.sliderSettings.horizontalMargin?S.calcMarginInPx(window.document.documentElement.clientWidth,this.sliderSettings.horizontalMargin):0,verticalMargin:this.sliderSettings.verticalMargin?S.calcMarginInPx(window.innerHeight,this.sliderSettings.verticalMargin):0}}}class E{widgetElement;skipWrapper;constructor(e){this.widgetElement=e,this.createSkipButton()}createSkipButton(){this.skipWrapper=document.createElement("div"),this.skipWrapper.classList.add("obv-skip-wrapper"),this.skipWrapper.style.opacity="0.5";const e=document.createElement("span");this.minimizeSkipButtonSize(e),e.innerText="Skip Ad";const t=document.createElement("div");t.classList.add("obv-skip-icon"),t.innerHTML="&#x25B6;",this.skipWrapper.appendChild(e),this.skipWrapper.appendChild(t),this.widgetElement.appendChild(this.skipWrapper)}minimizeSkipButtonSize(e){this.widgetElement.getBoundingClientRect().height<350&&(this.skipWrapper.classList.add("minimize-skip-button"),e.classList.add("minimize-skip-button-text"))}reset(e){window.setTimeout((()=>{this.skipWrapper.style.opacity="1",this.skipWrapper.addEventListener("click",(()=>{E.notifySkipClick(e),this.resetStyle()}))}),2e3)}static notifySkipClick(e){e&&e()}resetStyle(){this.skipWrapper.style.opacity="0.5"}}class x{widgetSettings;vidgetData;playerWrapperElement;playerDimensions;playerIdsPrefix;_innerPlayerWrapper;footerWrapper;headerWrapper;titleElement;videoWrapperViewportChanges$;videoWrapperViewportSubscription;containerId;widgetElement;widgetId;slider=null;skipAd=null;resizeObserver=null;get playerWrapper(){return this.playerWrapperElement}get innerPlayerWrapper(){return this._innerPlayerWrapper}constructor(e,t,i){this.widgetSettings=e,this.vidgetData=t,this.playerIdsPrefix=e.containerID+"_"+e.widgetID+"_",this.containerId=this.widgetSettings.containerID,this.widgetElement=u.r.getWidgetElement(i),this.widgetId=this.widgetSettings.widgetID}getAuditParams(){return{orientation:window.innerHeight>window.innerWidth?"PORTRAIT":"LANDSCAPE",viewability:this.getCurrentViewability()}}getCurrentViewability(){return e.Z.viewPercentage(this._innerPlayerWrapper)}create(){const t=e.Z.viewPercentage(this._innerPlayerWrapper)>50?P.w.InView:P.w.OutOfView;this.videoWrapperViewportChanges$=new r.X(t),this.playerWrapperElement=this.createPlayerWrapperElement(),this.createInnerPlayerWrapper(),this.playerWrapperElement&&(this.videoWrapperViewportSubscription=P.J.elementInViewChange(this._innerPlayerWrapper,{debounce:100,threshold:.5}).subscribe((e=>{e===P.w.InView?this.videoWrapperViewportChanges$.next(P.w.InView):this.videoWrapperViewportChanges$.next(P.w.OutOfView)})),this.createSkip())}createSkip(){this.widgetSettings.isReelWidget&&(this.skipAd=new E(this.innerPlayerWrapper))}getPlayerWrapperId(){return this.playerIdsPrefix}createInnerPlayerWrapper(){this.playerWrapperElement&&(this._innerPlayerWrapper=document.createElement("div"),this._innerPlayerWrapper.classList.add("ob-inner-player-wrapper"),this.playerWrapperElement.appendChild(this._innerPlayerWrapper))}createPlayerWrapperElement(){switch(this.widgetSettings.playerLocation){case h.h.AboveWidget:return this.createAboveWidgetPlayerWrapper();case h.h.BelowWidget:return this.createBelowWidgetPlayerWrapper();case h.h.InWidget:default:return this.createInWidgetPlayerWrapper()}}isVRLLayout(e){return e.classList.contains("ob-video-reel-layout")}createBelowWidgetPlayerWrapper(){try{const t=this.widgetSettings.playerMaxWidth.horizontal,i=e.Z.getSubtree(this.widgetElement).querySelectorAll(".ob-widget-items-container")||e.Z.getSubtree(this.widgetElement).querySelectorAll(".ob-widget");if(i&&i.length){const e=i[i.length-1];this.playerDimensions=x.getPlayerDimensionsForOuterPlayer(e,this.widgetElement,t,"horizontal");let r=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height,["below-widget"]),n=this.createContainerElement(this.containerId,this.widgetElement,r,!!this.widgetElement.shadowRoot);return null!=n&&(e.parentElement&&!this.isVRLLayout(e)?e.parentElement.insertBefore(n,e.nextSibling):e.appendChild(n)),r}}catch(e){throw new Error(`createBelowWidgetPlayerWrapper(): ${e.toString()}`)}}createAboveWidgetPlayerWrapper(){try{const t=e.Z.getSubtree(this.widgetElement),i=t.querySelector(".ob-widget-items-container")||t.querySelector(".ob-widget")||t.querySelector(".ob_video_container"),r=this.widgetSettings.playerMaxWidth.horizontal;if(i){const e=this.vidgetData.ghostFixedSize?this.widgetElement:i;this.playerDimensions=x.getPlayerDimensionsForOuterPlayer(e,this.widgetElement,r,"horizontal",!!this.vidgetData.ghostFixedSize);let t=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height,["above-widget"]),n=this.createContainerElement(this.containerId,this.widgetElement,t,!!this.widgetElement.shadowRoot);return null!=n&&(i.parentElement&&!this.isVRLLayout(i)?i.parentElement.insertBefore(n,i):i.appendChild(n)),t}throw"could not find firstWidgetItemsContainer"}catch(e){throw new Error(`createAboveWidgetPlayerWrapper(): ${e.toString()}`)}}createInWidgetPlayerWrapper(){try{const t=this.vidgetData.firstIndex,i=this.vidgetData.lastIndex,r=e.Z.getSubtree(this.widgetElement).querySelector(".ob-recIdx-"+t),n=e.Z.getSubtree(this.widgetElement).querySelector(".ob-recIdx-"+i);let o;if(this.vidgetData.coveredWidget){const t=e.Z.getSubtree(this.widgetElement).querySelector(".ob-widget > .ob-first")||e.Z.getSubtree(this.widgetElement).querySelector(".ob-widget > .ob-widget-items-container"),i=this.getCoveredPlayerHeight(t,t.clientWidth);o=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",t.clientWidth,i,["in-widget"]),o.style.top="unset";let r=this.createContainerElement(this.containerId,this.widgetElement,o,!!this.widgetElement.shadowRoot);null!=r&&t.insertBefore(r,t.firstChild)}else if(this.vidgetData.isReelWidget){const t=e.Z.getSubtree(this.widgetElement).querySelector(".ob-widget > .ob-reel-track");o=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.widgetElement.offsetWidth,r.clientHeight,["in-widget"]),o.style.zIndex="10";let i=this.createContainerElement(this.containerId,this.widgetElement,o,!!this.widgetElement.shadowRoot);this.widgetElement.shadowRoot?o?.parentElement?.style.setProperty("position","unset"):i?.style.setProperty("position","unset"),null!=i&&t.appendChild(i)}else{this.playerDimensions=x.getPlayerDimensions(r,n),o=x.createPlayerWrapperDiv(this.containerId+"_"+this.widgetId+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height,["in-widget"]);let e=this.createContainerElement(this.containerId,this.widgetElement,o,!!this.widgetElement.shadowRoot,"unset");null!=e&&r.appendChild(e)}return o}catch(e){throw e}}getCoveredPlayerHeight(t,i=0){let r=Math.floor(9*i/16);if(t.clientHeight<r)return t.clientHeight;for(let i of this.vidgetData.indexes){let n=e.Z.getSubtree(this.widgetElement).querySelector(".ob-recIdx-"+(parseInt(i)-1)).getBoundingClientRect().bottom-t.getBoundingClientRect().top;if(n>r){r=n;break}}return r}static getPlayerDimensionsForOuterPlayer(t,i,r,n,o=!1){if(i.getAttribute("data-feed-idx")){const t=e.Z.getSubtree(i).querySelector(".ob-widget-section");return x.getPlayerDimensions(t,null,r,n,o)}return x.getPlayerDimensions(t,null,r,n,o)}static createPlayerWrapperDiv(e,t,i,r){let n=window.document.createElement("div");return n.id=e,n.classList.add("ob-player-wrapper"),r&&r.length>0&&r.forEach((e=>n.classList.add(e))),n.style.setProperty("width",t+"px","important"),n.style.setProperty("height",i+"px","important"),n}createContainerElement(e,t,i,r=!1,n){if(r){let r="wrapperContainerForShadowDom_"+e,o=t.querySelector("#"+r);o&&o.remove();let s=window.document.createElement("div");if(s.id=r,"noNamedSlot"!==this.widgetSettings.featureFlag&&(s.slot="obvSlot"),s.appendChild(i),t.appendChild(s),n&&s?.style.setProperty("position",n),"noNamedSlot"!==this.widgetSettings.featureFlag){const e=window.document.createElement("slot");return e.name="obvSlot",e}return null==t?.shadowRoot?.querySelector("slot")?window.document.createElement("slot"):null}{let e=window.document.createElement("div");return e.classList.add("obv-video-wrapper"),e.appendChild(i),n&&e?.style.setProperty("position",n),e}}static getPlayerDimensions(t,i=null,r=null,n=null,o=!1){if(o)return{width:t.clientWidth,height:t.clientHeight};{const o=t.getBoundingClientRect();if(i){const r=i.getBoundingClientRect(),n={top:Math.min(o.top,r.top),bottom:Math.max(o.bottom,r.bottom),left:Math.min(o.left,r.left),right:Math.max(o.right,r.right)};let s=e.Z.getSiblingsBetweenRecs(t,i);for(let e of s){let t=e.getBoundingClientRect().bottom;t>n.bottom&&(n.bottom=t)}const a=n.right-n.left,d=n.bottom-n.top;return{width:a&&a>0?a:0,height:d&&d>0?d:0}}{const e=r&&r<o.width?r:o.width;return{width:e,height:null==n||"horizontal"===n?Math.floor(9*e/16):Math.floor(16*e/9)}}}}appendPlayer(e){this._innerPlayerWrapper.appendChild(e)}getPlayerWrapperDimensions(){return{width:this._innerPlayerWrapper.offsetWidth,height:this._innerPlayerWrapper.clientHeight}}showPlayer(e){this.playerWrapperElement.classList.remove("obv-hide-wrapper"),[...this._innerPlayerWrapper.children].forEach((t=>{t.classList.remove("obv-playing"),t.getAttribute("id")?.endsWith(e.getPlayerSuffix())&&t.classList.add("obv-playing")}))}hideAllPlayers(){this.destroySlider().then((()=>{this.playerWrapperElement.classList.add("obv-hide-wrapper"),[...this._innerPlayerWrapper.children].forEach((e=>{e.classList.remove("obv-playing")})),this.removeFooterAndHeaderContent(),this.removeTitle(),this.restorePlayerWrapperHeight(),this.unRegisterToWidgetResize()}))}onVideoStartPlaying(e){if(this.isHeightChangeAllowed()){const{width:t,height:i}=e.getVideoDimensions();this.adjustVideoHeight(t,i);const r=e.getFooterAndHeaderElements();this.setFooterAndHeader(r),this.resizeContainer(),this.registerToWidgetResize(e)}else if(this.widgetSettings.isReelWidget&&this.widgetSettings.isReelV2){const t=e.getFooterAndHeaderElements();this.setFooterAndHeader(t),this.registerToWidgetResize(e)}this.handleSlider(e),this.handleSkip(e),this.handleTitle()}registerToWidgetResize(e){this.widgetSettings.playerMaxWidth.vertical||this.widgetSettings.playerMaxWidth.horizontal||(this.resizeObserver=new ResizeObserver((t=>{const i=this.playerWrapperElement.getBoundingClientRect();if(t[0].contentRect.width!==i.width){const r=i.width/i.height,n=t[0].contentRect.width,o=n/r;this.playerWrapperElement.style.setProperty("width",n+"px","important"),this.playerWrapperElement.style.setProperty("height",o+"px","important"),e.resize(n,o)}})),this.resizeObserver.observe(this.widgetElement))}unRegisterToWidgetResize(){this.resizeObserver?.disconnect()}handleTitle(){this.removeTitle(),null!=this.vidgetData.title&&""!==this.vidgetData.title&&(this.titleElement=document.createElement("div"),this.titleElement.classList.add("obv-title-wrapper"),this.titleElement.innerText=this.vidgetData.title,this.playerWrapperElement.append(this.titleElement),this.playerWrapperElement.style.height=this.playerWrapperElement.getBoundingClientRect().height+(this.titleElement?.getBoundingClientRect().height||0)+"px")}removeTitle(){this.titleElement?.remove()}handleSlider(e){if(null==this.widgetSettings.stickyPlayer)return;const{width:t,height:i}=this.playerWrapperElement.getBoundingClientRect(),r=(this.vidgetData.sticky?.width||400)*i/t,n={sliderClassnames:["ob-sticky","ob-sticky-z-index"],placeholderClassname:"outbrain-place-holder-wrapper",sliderEntry:"side"===this.vidgetData.sticky?.sliderEntry?m.Sideways:m.BottomUp,sliderHeight:r,sliderWidth:this.vidgetData.sticky?.width,sliderPosition:this.vidgetData.sticky?.sliderPosition,verticalMargin:this.vidgetData.sticky?.sliderPercentBottom?this.vidgetData.sticky.sliderPercentBottom+"%":"30px",horizontalMargin:"2px",sliderMode:this.widgetSettings.stickyPlayer},o=this.widgetElement.closest(`.${this.widgetSettings.reportedWidgetId}`)||this.widgetElement;this.slider=new S(this.playerWrapperElement,n,o,(t=>{t.prev.isSliderActive!==t.next.isSliderActive&&t.next.isSliderActive?(this.unRegisterToWidgetResize(),e.resize(t.next.width,t.next.height)):t.prev.isSliderActive===t.next.isSliderActive||t.next.isSliderActive||(this.registerToWidgetResize(e),e.resize(this.playerDimensions.width,this.playerDimensions.height))}))}destroySlider(){return new Promise((e=>{this.slider?this.slider?.destroySlider().then((()=>{this.slider=null,e()})):e()}))}handleSkip(e){if(!this.widgetSettings.isReelWidget)return;this.skipAd?.reset((()=>{e.skipAd()}))}createHeader(e){this.headerWrapper=document.createElement("div"),this.headerWrapper.classList.add("obv-header-wrapper"),this.headerWrapper.appendChild(e),this.playerWrapperElement.prepend(this.headerWrapper)}createFooter(e){this.footerWrapper=document.createElement("div"),this.footerWrapper.classList.add("obv-footer-wrapper"),this.footerWrapper.style.fontFamily=this.widgetSettings.fontFamily,this.footerWrapper.appendChild(e),this.playerWrapperElement.append(this.footerWrapper)}setFooterAndHeader(e){(this.headerWrapper||this.footerWrapper)&&this.removeFooterAndHeaderContent(),e?.footer&&this.createFooter(e.footer),e?.header&&this.createHeader(e.header)}resizeContainer(){const e=this.playerWrapperElement.getBoundingClientRect().height;this.playerWrapperElement.style.height=e+(this.footerWrapper?.getBoundingClientRect().height||0)+(this.headerWrapper?.getBoundingClientRect().height||0)+"px"}removeFooterAndHeaderContent(){this.footerWrapper?.remove(),this.headerWrapper?.remove()}restorePlayerWrapperHeight(){this.playerDimensions?.height&&(this.playerWrapperElement.style.height=this.playerDimensions.height+"px")}adjustVideoHeight(e,t){if(!e||!t)return;const i=e/t,r=this.playerWrapperElement.getBoundingClientRect().width/i,n=this.widgetSettings.playerMaxWidth.vertical||Number.MAX_VALUE;this.playerWrapperElement.style.height=Math.min(r,n)+"px"}isHeightChangeAllowed(){return!(this.widgetSettings.playerLocation===h.h.InWidget||this.vidgetData.ghostFixedSize)}destroy(){const e=this.destroySlider();return e.then((()=>{this.videoWrapperViewportSubscription?.unsubscribe();const e=this.playerWrapperElement.parentElement;e&&e.classList.contains("obv-video-wrapper")?e.remove():this.playerWrapperElement.remove()})),e}}var I=n(3379),W=n.n(I),T=n(7795),C=n.n(T),V=n(569),R=n.n(V),O=n(3565),D=n.n(O),A=n(9216),M=n.n(A),k=n(4589),_=n.n(k),N=n(8048),F={};F.styleTagTransform=_(),F.setAttributes=D(),F.insert=R().bind(null,"head"),F.domAPI=C(),F.insertStyleElement=M();W()(N.Z,F),N.Z&&N.Z.locals&&N.Z.locals;var B=n(3443),L=n(6716),z=n(1480),$=n(8639),H=n(8474);function U(e,t,i){void 0===e&&(e=0),void 0===i&&(i=$.P);var r,n=-1;return null!=t&&((r=t)&&(0,H.m)(r.schedule)?i=t:n=t),new z.y((function(t){var r=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-i.now():e;r<0&&(r=0);var o=0;return i.schedule((function(){t.closed||(t.next(o++),0<=n?this.schedule(void 0,n):t.complete())}),r)}))}class q{time;timeElapsed=0;timer=null;subscription=null;update=new L.x;constructor(e){this.time=e}start(){const e=1e3;return this.timer=U(e,e),this.subscription=this.timer.subscribe((()=>{this.timeElapsed=this.timeElapsed+e,this.timeElapsed>=this.time&&(this.update.next(this.timeElapsed),this.subscription?.unsubscribe())})),this.update}pause(){this.stop()}resume(){this.timer||this.start()}stop(){this.timer&&(this.subscription?.unsubscribe(),this.timer=null)}}var Z,G,j,J=n(8178),Q=n(6022);!function(e){e[e.Never=0]="Never",e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.High=3]="High",e[e.Severe=4]="Severe"}(Z||(Z={}));class Y{widgetSettings;previousProvider=null;constructor(e){this.widgetSettings=e}getDefaultPriority(e){return[...new Set([...e.map((e=>e.getProviderName()))])].reduce(((e,t)=>({...e,[t]:Z.Medium})),{})}getHighestPriority(e){return Math.max(...Object.values(e))}setPriority(e,t){Object.keys(e).forEach((i=>{const r=this.widgetSettings.providers.find((e=>i===e.name));i===l.B.NATIVETOVIDEO&&(e[i]=Z.Low),r?.playMode!==v.Z.ViewPreload&&r?.playMode!==v.Z.View&&r?.currentPlayMode!==P.w.InView||(e[i]=t?Z.High:Z.Never),this.previousProvider?.getProviderName()===l.B.NATIVETOVIDEO&&i===l.B.NATIVETOVIDEO&&(e[i]=Z.Never)}))}getNextProviderName(e,t){const i=this.getDefaultPriority(e);this.setPriority(i,t);const r=this.getHighestPriority(i);return Object.keys(i).find((e=>i[e]===r&&i[e]!==Z.Never))}setPreviousProvider(e){this.previousProvider=e}}!function(e){e.Outstream="OUTSTREAM",e.Instream="INSTREAM"}(G||(G={})),function(e){e[e.shown=0]="shown",e[e.hidden=1]="hidden"}(j||(j={}));class X{sessionId;callbacks;audit;widgetSettings;vidgetData;providers=[];pendingPlayProviders=[];playerWrapperManager;viewabilityMeasurementSubscription;numOfPlays=0;activeProvider=null;providersState={};statusChange$;isVideoPlayed=!1;engagePlayTimer=null;engagePlayTimerSub$;currentWidget;vidgetTimeout=null;adQueue=null;wasPlacementViewedForFirstTime=!1;placementViewabilityMeasurementSubscription;placementViewabilityReached=!1;viewabilityMeasurementSettings;visibilityChange$;providersPendingInView=!1;get id(){return this.sessionId}constructor(e,i,n={}){this.sessionId=e,this.callbacks=n;try{this.currentWidget=i,this.vidgetData=p.getVidgetData(i),this.widgetSettings=this.createWidgetSettings(i),this.adQueue=new Y(this.widgetSettings),this.viewabilityMeasurementSettings={threshold:this.widgetSettings.viewabilityPercentageThreshold/100,timeInMilliseconds:1e3*this.widgetSettings.viewabiltyEventTime}}catch(t){throw this.audit=new b(e,{},{}),this.sendEvent({event:d.t.Error,description:`providersManager failed to init: ${t.toString()}`}),this.destroy(),t}this.audit=new b(e,this.widgetSettings,this.vidgetData),this.statusChange$=new r.X(t.M.Initialized),this.visibilityChange$=new r.X(j.hidden),this.sendEvent({event:d.t.Loaded}),(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - loaded`)}createWidgetSettings(e){return u.r.getWidgetSettings(e)}createPlayerWrapper(){this.playerWrapperManager=new x(this.widgetSettings,this.vidgetData,this.currentWidget);try{this.playerWrapperManager.create(),this.playerWrapperManager.hideAllPlayers()}catch(e){this.sendEvent({event:d.t.Error,description:"createPlayerWrapper failed to init: "+e.toString()})}}registerToVideoWrapperViewportChanges(){this.playerWrapperManager.videoWrapperViewportChanges$.subscribe((e=>{e!==P.w.InView||this.wasPlacementViewedForFirstTime||(this.wasPlacementViewedForFirstTime=!0,this.sendEvent({event:d.t.VidgetPlacementViewability})),this.placementViewabilityReached||(e===P.w.InView?this.startPlacementViewabilityMeasurement():this.stopPlacementViewabilityMeasurement()),this.statusChange$.value===t.M.NotPlaying&&e===P.w.InView&&this.pendingPlayProviders.length>0&&this.statusChange$.next(t.M.ReadyToPlay),this.providers.forEach((t=>{t.onViewabilityChange(e)}))}))}async createProvider(e){const t=Object.keys(l.B).find((t=>t===e.name));if(null==t)return null;const i=c.fP.providers[t].providerPath;let r;try{r=await n(5434)(`./${i}`)}catch(t){return this.sendEvent({event:d.t.Error,description:`could not load provider ${e.name} chunk, ${t}`}),null}const o=this.playerWrapperManager.getPlayerWrapperId(),s=this.playerWrapperManager.getPlayerWrapperDimensions(),a=new r.Provider(this.widgetSettings,this.vidgetData,e,o,s,this.currentWidget);return this.providers.push(a),a}onAdLoaded(e){(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - got ad loaded from ${e.getProviderName()}`),this.providersState[e.getProviderName()].loadedAds++,this.pendingPlayProviders.push(e),this.statusChange$.value!==t.M.Playing&&this.statusChange$.value!==t.M.ReadyToPlay&&this.statusChange$.next(t.M.ReadyToPlay)}sendEvent(e,t){e.event===d.t.Error&&(0,B.S)(`[${this.widgetSettings?.reportedWidgetId}-${this.widgetSettings?.reportedSubWidgetId}] - ERROR for provider ${t?.getProviderName()}: ${e.description}`);try{this.audit.send(e.event,{currentReload:this.numOfPlays,activeProvider:this.activeProvider?.getProviderName(),provider:t?.getProviderName(),description:e.description,isViewablePlay:t?.isViewabilityReached,playingType:this.isInstream()?G.Instream:G.Outstream,...e.extraParams,...t?.getProviderAuditParams(),...this.playerWrapperManager?.getAuditParams(),providersStatus:JSON.stringify(this.providersState),...this.getSpecialAuditParams(e)})}catch(i){this.audit.send(d.t.Error,{description:`could not send event ${e.event} from provider ${t?.getProviderName()}, error: ${i}`})}}onPlayerStatusChange(e,t){switch(t.event){case d.t.ProviderPass:(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - provider ${e.getProviderName()} reported no more ads found`),e.getProviderName()===this.activeProvider?.getProviderName()&&this.skipCurrentProvider(e),this.destroyProvider(e),this.providersPendingInView||0!==this.providers.length||((0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - all providers reported no ad found, running post video run flow`),this.execPostVideoRunFlow());break;case d.t.AdLoaded:this.onAdLoaded(e)}if(e.getProviderName()===this.activeProvider?.getProviderName())switch(t.event){case d.t.Close:return this.sendEvent(t,e),void this.destroy();case d.t.Skip:case d.t.Error:case d.t.Complete:this.skipCurrentProvider(e);break;case d.t.Pause:this.onPlayerPause();break;case d.t.Resume:this.onPlayerResume(e);break;case d.t.Play:this.onProviderPlay(e)}this.sendEvent(t,e)}onProviderPlay(e){this.startViewabilityMeasurement(e),this.measureEngagedPlay(e),this.playerWrapperManager.onVideoStartPlaying(e),this.providersState[e.getProviderName()].playedAds++,this.fireExternalPixels()}skipCurrentProvider(e){this.adQueue?.setPreviousProvider(this.activeProvider),this.activeProvider=null,this.stopViewabilityMeasurement(),this.stopEngagePlayMeasurement(),this.playerWrapperManager.hideAllPlayers(),e.holdPlayer(),e.getProviderName()===l.B.NATIVETOVIDEO&&Q.t.PlayOnce===this.widgetSettings.vidgetN2vBackfill&&e.destroy(),this.playNextProvider(!1)}onPlayerPause(){this.stopViewabilityMeasurement(),this.pauseEngagePlayMeasurement()}onPlayerResume(e){this.resumeEngagePlayMeasurement(),e.isViewabilityReached||this.startViewabilityMeasurement(e)}stopViewabilityMeasurement(){this.viewabilityMeasurementSubscription?.unsubscribe()}stopPlacementViewabilityMeasurement(){this.placementViewabilityMeasurementSubscription?.unsubscribe()}startViewabilityMeasurement(e){this.viewabilityMeasurementSubscription=P.J.measureViewability(this.playerWrapperManager.innerPlayerWrapper,this.viewabilityMeasurementSettings).subscribe((t=>{e.onViewabilityReached(t),this.sendEvent({event:d.t.Viewability,description:"viewability percentage threshold: "+this.widgetSettings.viewabilityPercentageThreshold,extraParams:{viewability:t}},e),this.stopViewabilityMeasurement()}))}startPlacementViewabilityMeasurement(){this.placementViewabilityMeasurementSubscription=P.J.measureViewability(this.playerWrapperManager.playerWrapper,this.viewabilityMeasurementSettings).subscribe((e=>{this.sendEvent({event:d.t.PlayerViewability,description:"viewability percentage threshold: "+this.widgetSettings.viewabilityPercentageThreshold,extraParams:{viewability:e}}),this.placementViewabilityReached=!0,this.stopPlacementViewabilityMeasurement()}))}playNextProvider(e){if(this.numOfPlays>=this.widgetSettings.configuredReloadCount)return this.sendEvent({event:d.t.Debug,description:`playNextProvider, configuredReloadCount of ${this.widgetSettings.configuredReloadCount} reached`}),(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - configured reload count is ${this.widgetSettings.configuredReloadCount} and num of plays is ${this.numOfPlays}, finishing playing vidget`),void this.statusChange$.next(t.M.Finished);if(!e&&i.M.shouldHoldVidgetByParallelPlayPolicy(this,[]))return this.sendEvent({event:d.t.Debug,description:"playNextProvider, parallelPlayPolicy stopped the flow"}),this.statusChange$.next(t.M.NotPlaying),void(this.pendingPlayProviders.length>0&&this.statusChange$.next(t.M.ReadyToPlay));if(this.isVideoPlayed&&this.widgetSettings.isReelWidget)return this.sendEvent({event:d.t.Debug,description:"playNextProvider, reelWidget cannot start playing independently"}),this.statusChange$.next(t.M.NotPlaying),this.isVideoPlayed=!1,void(this.pendingPlayProviders.length>0&&this.statusChange$.next(t.M.ReadyToPlay));if(0===this.pendingPlayProviders.length)return this.sendEvent({event:d.t.Debug,description:"playNextProvider, no provider has left in the queue"}),(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - pendingPlayProviders is empty`),void this.statusChange$.next(t.M.NotPlaying);const r=this.extractNextProvider(this.pendingPlayProviders);if(null==r)return this.sendEvent({event:d.t.Debug,description:"playNextProvider, could not find eligible provider"}),(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - nextProvidrIsNull`),void this.statusChange$.next(t.M.NotPlaying);this.activeProvider=r,setTimeout((()=>{this.playNextAd(r)}),e?0:this.widgetSettings.configuredReloadTime)}playNextAd(e){if(e.isAdReady()){this.clearVidgetTimeout(),(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - telling provider ${e.getProviderName()} to play`),this.showPlayerBeforePlaying(e),this.sendEvent({event:d.t.Debug,description:"playNextAd, calling provider play"},e);try{e.playLoadedAd()}catch(t){this.onPlayFailed(e,t)}this.numOfPlays++,this.isVideoPlayed=!0,this.stopViewabilityMeasurement(),this.statusChange$.value!==t.M.Playing&&this.statusChange$.next(t.M.Playing)}else this.onPlayFailed(e,"start ad called but no ad is pending to play")}onPlayFailed(e,t){this.skipCurrentProvider(e),this.sendEvent({event:d.t.Error,description:t},e)}showPlayerBeforePlaying(e){this.playerWrapperManager.showPlayer(e),this.visibilityChange$.next(j.shown)}extractNextProvider(e){const t=this.adQueue?.getNextProviderName(e,this.isInView()||!1),i=e.findIndex((e=>{if(e.getProviderName()===t)return e}));return-1!==i?e.splice(i,1)[0]:null}load(){this.createPlayerWrapper(),this.registerToVideoWrapperViewportChanges(),this.applyVideoWidgetTimeout();const{providersToLoadNow:e,providersToLoadLater:t}=this.widgetSettings.providers.reduce(((e,t)=>(t.playMode===v.Z.View?e.providersToLoadLater.push(t):e.providersToLoadNow.push(t),e)),{providersToLoadNow:[],providersToLoadLater:[]}),i=this.getN2vProvider();var r,n;i&&t.push(i),t.length>0&&(this.providersPendingInView=!0,this.playerWrapperManager.videoWrapperViewportChanges$.pipe((r=e=>e===P.w.OutOfView,n=!0,void 0===n&&(n=!1),(0,o.e)((function(e,t){var i=0;e.subscribe((0,s.x)(t,(function(e){var o=r(e,i++);(o||n)&&t.next(e),!o&&t.complete()})))})))).subscribe((e=>{e===P.w.InView&&(this.loadProviders([...t]),this.providersPendingInView=!1)}))),this.loadProviders([...e])}getN2vProvider(){if([Q.t.AfterEach,Q.t.PlayOnce].indexOf(this.widgetSettings.vidgetN2vBackfill)>-1){let e=this.widgetSettings.providers.find((e=>e.name===l.B.NATIVETOVIDEO));return e||(e=J.d.providers?.find((e=>e.name===l.B.NATIVETOVIDEO))),e}}loadProviders(e){e.forEach((async e=>{(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - about to init ${e.name}`);const t=await this.createProvider(e);null!=t&&(this.providersState[t.getProviderName()]={playedAds:0,loadedAds:0},t.onViewabilityChange(this.playerWrapperManager.videoWrapperViewportChanges$.value),this.createProviderPlayer(t))}))}createProviderPlayer(e){e.createPlayer().then((t=>{(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - player initiated ${e.getProviderName()}`),this.playerWrapperManager.appendPlayer(t),this.registerToProviderChanges(e),this.sendDebugStats(e)}))}sendDebugStats(e){const t=e.getDebugStats();Object.keys(t).length>0&&this.sendEvent({event:d.t.Debug,description:`debug stats: ${JSON.stringify(t)}`},e)}registerToProviderChanges(e){e.stateChanges$.subscribe((t=>{this.onPlayerStatusChange(e,t)}))}startPlaying(){this.sendEvent({event:d.t.Debug,description:"providersManager, startPlaying was called"}),this.playNextProvider(!0)}getPlayMode(){return this.widgetSettings.parallelPlay}isInApp(){return this.vidgetData?.inAppBridge||!1}getPlayersWrapperElement(){return this.playerWrapperManager?.innerPlayerWrapper}isInView(){return this.playerWrapperManager.videoWrapperViewportChanges$?.value===P.w.InView}isInstream(){return!1}measureEngagedPlay(e){this.engagePlayTimer=new q(3e4),this.engagePlayTimerSub$=this.engagePlayTimer.start().subscribe((()=>{this.stopEngagePlayMeasurement(),this.sendEvent({event:d.t.EngagedPlay,extraParams:{videoProgress:Math.round(e.getProviderAuditParams().videoProgress/1e3),viewability:this.playerWrapperManager.getCurrentViewability()}},e)}))}resumeEngagePlayMeasurement(){this.engagePlayTimer?.resume()}pauseEngagePlayMeasurement(){this.engagePlayTimer?.pause()}stopEngagePlayMeasurement(){this.engagePlayTimer?.stop(),this.engagePlayTimerSub$?.unsubscribe()}fireExternalPixels(){this.widgetSettings.vidgetExternalImpressionPixels&&e.Z.firePixels(this.widgetSettings.vidgetExternalImpressionPixels,this.widgetSettings,this.vidgetData,null,(e=>{this.sendEvent({event:d.t.PixelFired,description:e.substring(0,75)})}))}destroyProvider(e){e.stateChanges$.unsubscribe(),e.destroy(),this.providers=this.providers.filter((t=>t.getProviderName()!==e.getProviderName()))}destroy(){(0,B.S)(`[${this.widgetSettings?.reportedWidgetId}-${this.widgetSettings?.reportedSubWidgetId}] - destroying`),this.stopViewabilityMeasurement(),this.stopPlacementViewabilityMeasurement(),this.stopEngagePlayMeasurement(),this.playerWrapperManager?this.playerWrapperManager.destroy().then((()=>{this.destroyProviders()})):this.destroyProviders()}destroyProviders(){this.providers?.forEach((e=>{this.destroyProvider(e)}))}execPostVideoRunFlow(){if(this.vidgetTimeout&&this.clearVidgetTimeout(),this.widgetSettings.vidgetN2vBackfill!==Q.t.AfterAll||0!==this.numOfPlays)this.statusChange$.next(t.M.Finished);else{this.widgetSettings.configuredReloadCount=1;const e=J.d.providers?.find((e=>e.name===l.B.NATIVETOVIDEO));this.loadProviders([e])}}applyVideoWidgetTimeout(){this.widgetSettings.vidgetTimeout&&(this.vidgetTimeout=setTimeout((()=>{(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - vidgetTimeout of ${this.widgetSettings.vidgetTimeout} reached, running post video run flow`),this.sendEvent({event:d.t.Debug,description:`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - vidgetTimeout of ${this.widgetSettings.vidgetTimeout} reached`}),this.destroyProviders(),this.execPostVideoRunFlow()}),this.widgetSettings.vidgetTimeout))}clearVidgetTimeout(){clearTimeout(this.vidgetTimeout),this.vidgetTimeout=null}getSpecialAuditParams(e){const t={};return e.event===d.t.Complete&&this.wasPlacementViewedForFirstTime&&(t.completeInview=!0),t}}var K;n(7656);!function(e){e.onPlay="onPlay",e.onPaidPlay="onPaidPlay",e.onReady="onReady",e.onClose="onClose",e.onOrganicClose="onOrganicClose",e.onCompleteReloads="onCompleteReloads",e.onShow="onShow"}(K||(K={}));var ee=n(9202),te=n(7917);class ie extends X{isInstreamExperienceStarted=!1;createWidgetSettings(e){let t=super.createWidgetSettings(e);return t.providers=J.d.providers?.filter((e=>e.name===l.B.VI)),t.providers.filter((e=>e.name===l.B.VI))[0].playWaitingTime=null,t.vidgetN2vBackfill=Q.t.None,t.forceVI&&(t=this.overrideWidgetSettings(t)),t}overrideWidgetSettings(e){const t=this.vidgetData?.coveredWidget?h.h.InWidget:h.h.AboveWidget;return{...e,...te.ViStaticSettings,playerLocation:t}}onPlayerStatusChange(e,t){if(t.event===d.t.AdLoaded)u.r.isVrlHiddenMode(this.widgetSettings)&&this.showPlayer();super.onPlayerStatusChange(e,t)}showPlayerBeforePlaying(e){u.r.isVrlHiddenMode(this.widgetSettings)||this.showPlayer()}showPlayer(){this.playerWrapperManager.showPlayer(this.activeProvider),this.visibilityChange$.next(j.shown)}createProviderPlayer(e){this.playerWrapperManager.appendPlayer(e.getPlayerElement()),this.activeProvider=e,this.statusChange$.next(t.M.ReadyToPlay),this.statusChange$.subscribe((i=>{i===t.M.Playing&&e.createPlayer().then((()=>{(0,B.S)(`[${this.widgetSettings.reportedWidgetId}-${this.widgetSettings.reportedSubWidgetId}] - instream: player initiated ${e.getProviderName()}`),this.registerToProviderChanges(e)}))}))}onProviderPlay(e){this.stopViewabilityMeasurement(),this.startViewabilityMeasurement(e),this.stopEngagePlayMeasurement(),this.measureEngagedPlay(e),this.providersState[e.getProviderName()].playedAds++,this.isInstreamExperienceStarted||(this.isInstreamExperienceStarted=!0,this.playerWrapperManager.onVideoStartPlaying(e),this.fireExternalPixels())}playNextProvider(){this.playNextAd(this.activeProvider),this.widgetSettings.playerLocation!==h.h.InWidget&&(this.playerWrapperManager.playerWrapper.style.height="unset")}skipCurrentProvider(e){this.stopViewabilityMeasurement(),this.stopEngagePlayMeasurement()}isInstream(){return!0}}class re{vidgets=[];startPlayingTimeout=null;lastOdbCallTimestamp=0;async init(t,r,n={}){const o=e.Z.guid(),s=re.initiateProviderManager(o,t,n);if(!s)throw"could not create providerManager";s.statusChange$.subscribe((e=>{this.onVidgetStatusChange(s,e)})),s.visibilityChange$.subscribe((e=>{e===j.shown&&re.callWidgetCallback(s.callbacks,K.onShow,s.widgetSettings.widgetIdx)})),i.M.shouldDisposeVidget(s.getPlayMode(),s.getPlayersWrapperElement())?re.destroyVidgetDueToStrictMode(s):setTimeout((()=>{s.load(),this.vidgets.push(s)}),s.isInApp()?5e3:0)}static initiateProviderManager(e,t,i){return u.r.getVidStatus(t)===ee.S.outstream?new X(e,t,i):new ie(e,t,i)}getHLRVidgetEligibleToPlay(e){return this.vidgets.find((i=>i.widgetSettings.isReelWidget&&i.widgetSettings.widgetIdx==e&&i.statusChange$.value===t.M.ReadyToPlay))}play(e){const t=this.getHLRVidgetEligibleToPlay(e);if(t){if(i.M.shouldDisposeVidget(t.getPlayMode(),t.getPlayersWrapperElement()))return re.destroyVidgetDueToStrictMode(t),!1;if(!i.M.shouldHoldVidgetByParallelPlayPolicy(t,this.vidgets))return t.startPlaying(),!0;t.sendEvent({event:d.t.Pending,description:`hlr providersManager with parallelPlay policy: ${t.getPlayMode()} is pending`}),setTimeout((()=>{re.callWidgetCallback(t.callbacks,K.onReady,t.widgetSettings.widgetIdx)}),1e3)}return!1}onVidgetStatusChange(e,i){switch(i){case t.M.ReadyToPlay:e.sendEvent({event:d.t.Debug,description:'providerManager fired "readyToPlay"'}),re.callWidgetCallback(e.callbacks,K.onReady,e.widgetSettings.widgetIdx),e.widgetSettings.isReelWidget||this.onVidgetReadyToPlay(e);break;case t.M.Playing:re.callWidgetCallback(e.callbacks,K.onPlay,e.widgetSettings.widgetIdx);break;case t.M.NotPlaying:re.callWidgetCallback(e.callbacks,K.onClose,e.widgetSettings.widgetIdx),this.playNextVidget();break;case t.M.Finished:case t.M.Failure:re.callWidgetCallback(e.callbacks,K.onClose,e.widgetSettings.widgetIdx),this.removeVidget(e),this.playNextVidget()}}static callWidgetCallback(e,t,i){e&&e[t]&&e[t](i)}onVidgetReadyToPlay(e){null!=this.vidgets.find((t=>t.id===e.id))&&(i.M.shouldDisposeVidget(e.getPlayMode(),e.getPlayersWrapperElement())?re.destroyVidgetDueToStrictMode(e):i.M.shouldHoldVidgetByParallelPlayPolicy(e,this.vidgets)?(e.sendEvent({event:d.t.Pending,description:`providersManager with parallelPlay policy: ${e.getPlayMode()} is pending`}),clearTimeout(this.startPlayingTimeout),this.startPlayingTimeout=setTimeout((()=>{this.onVidgetReadyToPlay(e)}),5e3)):e.startPlaying())}static destroyVidgetDueToStrictMode(e){e.sendEvent({event:d.t.VidgetConfigError,description:`Other video exists on page, parallelPlay policy: ${e.getPlayMode()}`}),e.destroy()}removeVidget(e){const t=e.id;e.destroy(),this.vidgets.splice(this.vidgets.findIndex((e=>e.id===t)),1)}playNextVidget(){let e=this.vidgets.filter((e=>e.statusChange$.value===t.M.ReadyToPlay&&!e.widgetSettings.isReelWidget));if(0!==e.length)if(1===e.length)e[0].startPlaying();else{const t=e.filter((e=>e.isInView()));0===t.length?e[0].startPlaying():1===t.length&&t[0].startPlaying()}}getExtraRtbRequestParams(){const e=Date.now();return e-this.lastOdbCallTimestamp>=3e4?(this.lastOdbCallTimestamp=e,"&iv30=true"):"&iv30=false"}reloadObVideo(){this.destroy(),window.OB_VIDEO=window.OB_VIDEO||new re}destroy(){this.vidgets.forEach((e=>{e.destroy()})),delete window.OB_VIDEO}}window.OB_VIDEO=window.OB_VIDEO||new re,window.OB_PROXY?window.OB_PROXY.makeHandshake("OB_VIDEO"):console.log("no ob-proxy")}()}();